(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{188:function(e,t,a){e.exports=a.p+"static/media/dt_flow.18cbb62c.jpg"},202:function(e,t,a){e.exports=a(390)},388:function(e,t,a){},390:function(e,t,a){"use strict";a.r(t);a(82);var n,r,l,i,o,c,p,s,u,d,m,h,g,f,E,b,y,N,O,S,v,j,w,A,x,C,k,I,T,G,F,P,D,z,_,M,L,U,R,Y,K,B,H,J,V,W,X,Z,$,q=a(0),Q=a.n(q),ee=a(7),te=a.n(ee),ae=a(13),ne=a(198),re=a(26),le=a(130),ie=a(15),oe=a(14),ce=a(16),pe=(a(109),a(10)),se=a(60),ue=a.n(se),de=(n=pe.action.bound,r=function e(t){Object(oe.a)(this,e),this.errorStore=void 0,Object(ie.a)(this,"adapters",l,this),Object(ie.a)(this,"getAdapters",i,this),this.errorStore=t},l=Object(ce.a)(r.prototype,"adapters",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(ce.a)(r.prototype,"getAdapters",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){ue.a.get("".concat("/api","/adapters")).then((function(t){"data"in t?e.adapters=t.data:console.log("THERE IS SOMETHING WRONG!")}))}}}),r),me=(o=pe.action.bound,c=pe.action.bound,p=pe.action.bound,s=pe.action.bound,u=pe.action.bound,d=pe.action.bound,m=pe.action.bound,h=pe.action.bound,g=pe.action.bound,f=pe.action.bound,E=pe.action.bound,b=pe.action.bound,y=pe.action.bound,N=function e(t){Object(oe.a)(this,e),this.errorStore=void 0,Object(ie.a)(this,"pipelines",O,this),Object(ie.a)(this,"currentPipeline",S,this),Object(ie.a)(this,"uploadedPipelineData",v,this),Object(ie.a)(this,"graphCreated",j,this),Object(ie.a)(this,"selectedNode",w,this),Object(ie.a)(this,"selectedEdge",A,this),Object(ie.a)(this,"graphNodes",x,this),Object(ie.a)(this,"graphEdges",C,this),Object(ie.a)(this,"startFetch",k,this),Object(ie.a)(this,"successFetch",I,this),Object(ie.a)(this,"failedFetch",T,this),Object(ie.a)(this,"getPipelines",G,this),Object(ie.a)(this,"getPipeline",F,this),Object(ie.a)(this,"setUploadedPipelineData",P,this),Object(ie.a)(this,"setUploadedPipelineFromDcat",D,this),Object(ie.a)(this,"setGraphCreated",z,this),Object(ie.a)(this,"createPipeline",_,this),Object(ie.a)(this,"setGraphNodes",M,this),Object(ie.a)(this,"setGraphEdges",L,this),Object(ie.a)(this,"setSelectedNode",U,this),Object(ie.a)(this,"setSelectedEdge",R,this),this.errorStore=t},O=Object(ce.a)(N.prototype,"pipelines",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=Object(ce.a)(N.prototype,"currentPipeline",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(ce.a)(N.prototype,"uploadedPipelineData",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Object(ce.a)(N.prototype,"graphCreated",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(ce.a)(N.prototype,"selectedNode",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Object(ce.a)(N.prototype,"selectedEdge",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=Object(ce.a)(N.prototype,"graphNodes",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=Object(ce.a)(N.prototype,"graphEdges",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=Object(ce.a)(N.prototype,"startFetch",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.errorStore.isLoading=!0,console.log("inside start fetch!")}}}),I=Object(ce.a)(N.prototype,"successFetch",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.errorStore.isLoading=!1,e.errorStore.hasFailed=!1,console.log("inside success fetch!")}}}),T=Object(ce.a)(N.prototype,"failedFetch",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){console.log("inside failed fetch!"),e.errorStore.isLoading=!1,e.errorStore.hasFailed=!0,e.errorStore.errorData=t}}}),G=Object(ce.a)(N.prototype,"getPipelines",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){Promise.resolve().then(e.startFetch).then((function(){return ue.a.get("".concat("/api","/pipelines")).then((function(t){e.pipelines=t.data,e.successFetch()}),(function(t){e.failedFetch(t.response)}))}))}}}),F=Object(ce.a)(N.prototype,"getPipeline",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){Promise.resolve().then(e.startFetch).then((function(){return ue.a.get("".concat("/api","/pipelines/").concat(t)).then((function(t){e.currentPipeline=t.data,e.successFetch()}),(function(t){e.failedFetch(t)}))}))}}}),P=Object(ce.a)(N.prototype,"setUploadedPipelineData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.uploadedPipelineData=t}}}),D=Object(ce.a)(N.prototype,"setUploadedPipelineFromDcat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){Promise.resolve().then(e.startFetch).then((function(){return ue.a.get("".concat("/api","/pipeline/dcat/").concat(t)).then((function(t){e.uploadedPipelineData=t.data.data,e.graphCreated=!0,e.successFetch()}),(function(t){e.failedFetch(t)}))}))}}}),z=Object(ce.a)(N.prototype,"setGraphCreated",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.graphCreated=t}}}),_=Object(ce.a)(N.prototype,"createPipeline",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a,n,r){Promise.resolve().then(e.startFetch).then((function(){return ue.a.post("".concat("/api","/pipeline/create"),{name:t,description:a,nodes:n,edges:r}).then((function(t){e.successFetch()}),(function(t){e.failedFetch(t)}))}))}}}),M=Object(ce.a)(N.prototype,"setGraphNodes",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.graphNodes=t}}}),L=Object(ce.a)(N.prototype,"setGraphEdges",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.graphEdges=t}}}),U=Object(ce.a)(N.prototype,"setSelectedNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedNode=t,e.selectedEdge=null}}}),R=Object(ce.a)(N.prototype,"setSelectedEdge",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedEdge=t,e.selectedNode=null}}}),N),he=(Y=pe.action.bound,K=pe.action.bound,B=pe.action.bound,H=function e(){Object(oe.a)(this,e),Object(ie.a)(this,"isLoading",J,this),Object(ie.a)(this,"hasFailed",V,this),Object(ie.a)(this,"errorData",W,this),Object(ie.a)(this,"setIsLoading",X,this),Object(ie.a)(this,"setHasFailed",Z,this),Object(ie.a)(this,"setErrorData",$,this)},J=Object(ce.a)(H.prototype,"isLoading",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=Object(ce.a)(H.prototype,"hasFailed",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=Object(ce.a)(H.prototype,"errorData",[pe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),X=Object(ce.a)(H.prototype,"setIsLoading",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoading=t}}}),Z=Object(ce.a)(H.prototype,"setHasFailed",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hasFailed=t}}}),$=Object(ce.a)(H.prototype,"setErrorData",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.errorData=t}}}),H),ge=new le.RouterStore,fe=new he,Ee={routing:ge,pipelineStore:new me(fe),adapterStore:new de(fe),errorStore:fe},be=Object(le.syncHistoryWithStore)(Object(re.a)(),ge);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye,Ne,Oe,Se,ve,je,we,Ae,xe,Ce,ke,Ie,Te,Ge,Fe,Pe,De,ze=a(18),_e=a(20),Me=a(19),Le=a(21),Ue=a(37),Re=a(53),Ye=function(e){function t(){return Object(oe.a)(this,t),Object(_e.a)(this,Object(Me.a)(t).apply(this,arguments))}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){return Q.a.createElement("div",{style:{textAlign:"center"}},Q.a.createElement("h1",null,"404 Resource Not Found"))}}]),t}(Q.a.Component),Ke=a(391),Be=a(398),He=a(399),Je=a(392),Ve=a(402),We=Ke.a.Header,Xe=Ke.a.Content,Ze=Ke.a.Footer,$e=Be.a.Search,qe=Object(ae.b)((function(e){return{isLoading:e.errorStore.isLoading,hasFailed:e.errorStore.hasFailed,errorData:e.errorStore.errorData}}))(ye=Object(ae.c)(ye=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={selectedKey:""},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){var e=this,t=this.props.children;return q.createElement(Ke.a,{className:"layout",style:{height:"100%"}},q.createElement(We,null,q.createElement(He.a,{theme:"dark",mode:"horizontal",openKeys:[this.state.selectedKey?this.state.selectedKey:"home-page"],style:{lineHeight:"64px"},onClick:function(t){var a=t.key;return e.setState({selectedKey:a})}},q.createElement(He.a.Item,{key:"home"},q.createElement(Ue.b,{to:"/"},"MINT DT")),q.createElement(He.a.Item,{key:"home-page",onClick:function(){return e.setState({selectedKey:"home-page"})}},q.createElement(Ue.b,{to:"/",onClick:function(){return e.setState({selectedKey:"home-page"})}},"Home")),q.createElement(He.a.Item,{key:"adapters"},q.createElement(Ue.b,{to:"/adapters"},"Adapters")),q.createElement(He.a.Item,{key:"pipelines"},q.createElement(Ue.b,{to:"/pipelines"},"Pipeline")),q.createElement(He.a.Item,{key:"create-pipeline"},q.createElement(Ue.b,{to:"/pipeline/create"},"Create Pipeline")),q.createElement(He.a.Item,{style:{float:"right"}},q.createElement($e,{placeholder:"Search MINT DT!",onSearch:function(e){return console.log(e)}})))),q.createElement(Xe,{style:{padding:"30px 50px"}},q.createElement("div",{style:{background:"#fff",padding:24,minHeight:400,height:"100%",overflow:"auto"}},this.props.isLoading?q.createElement(Je.a,{size:"large",style:{textAlign:"center"}},q.createElement(Ve.a,{message:"Loading pipeline history",description:"Right now is really slow :/",type:"info"})):null,this.props.hasFailed?q.createElement("pre",null,q.createElement("b",null,q.createElement("u",{style:{color:"red"}},"Oops! Some error has occurred! Refresh the page to try again!")),q.createElement("br",null),q.createElement("br",null),JSON.stringify(this.props.errorData,null,2)):null,this.props.isLoading||this.props.hasFailed?null:t)),q.createElement(Ze,{style:{textAlign:"center",verticalAlign:"bottom"}},"MINT \xa92020 Created by USC ISI"))}}]),t}(q.Component))||ye)||ye,Qe=a(188),et=a.n(Qe),tt=a(395),at=a(72),nt=a(39),rt=tt.a.Title,lt=tt.a.Paragraph,it=Object(ae.b)((function(e){return{}}))(Ne=Object(ae.c)((Se=Oe=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){return Q.a.createElement(qe,null,Q.a.createElement(tt.a,null,Q.a.createElement(rt,null,"Welcome to MINT-DT",Q.a.createElement("br",null),Q.a.createElement("span",{style:{color:"purple",fontSize:"0.9em"}},Q.a.createElement("i",null," A framework to construct a transformation pipeline based on a given specification")),Q.a.createElement("br",null)),Q.a.createElement(at.a,null,Q.a.createElement(nt.a,{span:16},Q.a.createElement(lt,{style:{textAlign:"left",fontSize:"1.0em"}},"The idea is that we use ",Q.a.createElement("span",{style:{color:"blue"}},"smaller components")," (we refer to them as ",Q.a.createElement("b",null,"adapters"),' or building blocks) which we \u2019concatenate\u2019 to form a transformation flow (a "pipeline"). This modular design allows us to ',Q.a.createElement("span",{style:{color:"blue"}},"reuse")," existing modules and ",Q.a.createElement("span",{style:{color:"blue"}},"wrap ready-scripts")," to create a ",Q.a.createElement("span",{style:{color:"blue"}},"language-and-format-independent module")," and ",Q.a.createElement("span",{style:{color:"blue"}},"pipeline"),".",Q.a.createElement("br",null),"There are three types of components (adapters):",Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Reader Adapter")),". Used as an entry point in the pipeline. It reads an input file (data) and a description of it (D-REPR language).",Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Transformation Adapter")),". A class which performs a trans- formation done in a form of an API endpoint (remote or local) or an in-code script or library (i.e. using python or R). It does not materialize the data into an output, it just reproduces the data.",Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Writer Adapter")),". Used as an exit point in the pipeline. It writes an output file based on a description file (D-REPR language).",Q.a.createElement("br",null),"Each adapter is declared using a semantic description of its attributes (i.e. inputs and outputs). The description enables input data validation and compatibility checking between the concatenated adapters and allows an easier construction of the transformation pipeline based on some simple input from the user.",Q.a.createElement("br",null),"The figure on the right depicts the general idea of our architecture that is based on building-blocks and components that can be concatenated. In the figure we show a simplified scheme of a transformation pipeline involving a reader adapter, two transformation adapters (\u2019TA\u2019) and a writer adapter.",Q.a.createElement("br",null),Q.a.createElement("i",null,"As an example, a ",Q.a.createElement("span",{style:{color:"blue"}},"reader adapter")," may be a CSV-file-reader that encodes the file's content to an intermediate representation. A ",Q.a.createElement("span",{style:{color:"purple"}},"transformation adapter")," may perform unit conversions on the data. Other components, such as Wrap and GraphStr2Str, are used to join and reformat the same resource without changing the actual content of the data. A ",Q.a.createElement("span",{style:{color:"purple"}},"writer adapter")," will materialize the output data to some other format, i.e. a NetCDF4 file."),Q.a.createElement("br",null))),Q.a.createElement(nt.a,{span:4},Q.a.createElement("img",{src:et.a,alt:""})))))}}]),t}(Q.a.Component),Oe.defaultProps={},Ne=Se))||Ne)||Ne,ot=a(401),ct=a(27),pt=a.n(ct),st=Object(ae.b)((function(e){return{adapters:e.adapterStore.adapters,getAdapters:e.adapterStore.getAdapters}}))(ve=Object(ae.c)((we=je=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"componentDidMount",value:function(){this.props.getAdapters()}},{key:"render",value:function(){var e=0===this.props.adapters.length;return Q.a.createElement(qe,null,this.props.adapters.map((function(t,a){return Q.a.createElement(ot.a,{title:t.id,bordered:!0,loading:e,style:{margin:"10px 10px"},key:"card-".concat(a),hoverable:!0},Q.a.createElement("pre",null,"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Function Name")),": ",t.id,Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Friendly Name")),": ",t.friendly_name,Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Function Type")),": ",t.func_type,Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Description")),": ",t.description,Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Inputs")),": ",pt.a.isEmpty(t.inputs)?Q.a.createElement("p",null,"None"):Object.keys(t.inputs).map((function(e,a){return Q.a.createElement("pre",{key:"input-".concat(a)},Q.a.createElement("b",null,Q.a.createElement("u",null,e)),":",Q.a.createElement("br",null),"Type: ",Q.a.createElement("input",{value:t.inputs[e].id,readOnly:!0}),";",Q.a.createElement("br",null),"Optional: ",Q.a.createElement("input",{value:JSON.stringify(t.inputs[e].optional),readOnly:!0}))})),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Outputs")),": ",pt.a.isEmpty(t.outputs)?Q.a.createElement("p",null,"None"):Object.keys(t.outputs).map((function(e,a){return Q.a.createElement("pre",{key:"input-".concat(a)},Q.a.createElement("b",null,Q.a.createElement("u",null,e)),":",Q.a.createElement("br",null),"Type: ",Q.a.createElement("input",{value:t.outputs[e].id,readOnly:!0}),";",Q.a.createElement("br",null),"Optional: ",Q.a.createElement("input",{value:JSON.stringify(t.outputs[e].optional),readOnly:!0}))})),Q.a.createElement("br",null)))})))}}]),t}(Q.a.Component),je.defaultProps={},ve=we))||ve)||ve,ut=a(397),dt=a(34),mt=a(393),ht=tt.a.Title,gt=Be.a.Search,ft=Object(ae.b)((function(e){return{pipelines:e.pipelineStore.pipelines,getPipelines:e.pipelineStore.getPipelines}}))(Ae=Object(ae.c)(Ae=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={},a.timestampDropdownMenu=Q.a.createElement(He.a,null,Q.a.createElement(He.a.Item,null,"Newest"),Q.a.createElement(He.a.Item,null,"Oldest")),a.statusColorCode={running:"orange",finished:"green",failed:"red"},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"componentDidMount",value:function(){this.props.getPipelines()}},{key:"render",value:function(){var e=this;return Q.a.createElement(qe,null,Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(at.a,{type:"flex",align:"middle",style:{margin:"20px 0"}},Q.a.createElement(nt.a,{span:12},Q.a.createElement(gt,{placeholder:"input search text",onSearch:function(e){return console.log(e)},style:{textAlign:"left"}})),Q.a.createElement(nt.a,{span:8}),Q.a.createElement(nt.a,{span:2},Q.a.createElement(ut.a,{overlay:this.timestampDropdownMenu},Q.a.createElement(dt.a,{type:"link",icon:"down",style:{float:"right",color:"black"}},"Sort"))),Q.a.createElement(nt.a,{span:2},Q.a.createElement(mt.a,{content:"Create a new pipeline!"},Q.a.createElement(Ue.b,{to:"/pipeline/create"},Q.a.createElement(dt.a,{type:"primary",shape:"circle",icon:"plus",style:{float:"right",margin:"0 25px"},size:"large"}))))),this.props.pipelines.map((function(t,a){return Q.a.createElement(at.a,{key:"row-".concat(a),type:"flex",align:"middle"},Q.a.createElement(nt.a,{span:2,style:{textAlign:"right"}},Q.a.createElement(ht,{style:{color:"".concat(pt.a.get(e.statusColorCode,t.status,"black"))},level:4},t.status)),Q.a.createElement(nt.a,{span:1}),Q.a.createElement(nt.a,{span:19},Q.a.createElement(at.a,{style:{margin:"0 0"}},Q.a.createElement(ht,{level:4},Q.a.createElement(Ue.b,{to:"/pipelines/".concat(t.id),style:{color:"black"}},pt.a.isEmpty(t.name)?"Unnamed":t.name))),Q.a.createElement(at.a,{style:{margin:"0 0"}},Q.a.createElement("p",null,""===t.end_timestamp?"Started at ".concat(t.start_timestamp,", still running"):"Started at ".concat(t.start_timestamp,", ended at ").concat(t.end_timestamp)))),Q.a.createElement(nt.a,{span:2},Q.a.createElement(dt.a,{type:"danger",onClick:function(){return console.log("Doesn't do anything!")},disabled:"running"!==t.status,style:{marginRight:"10px"}},"STOP")))})),0===this.props.pipelines.length?Q.a.createElement("p",{style:{textAlign:"center"}},Q.a.createElement("b",null,"No pipeline to show :/")):null))}}]),t}(Q.a.Component))||Ae)||Ae,Et=Be.a.TextArea,bt=Object(ae.b)((function(e){return{currentPipeline:e.pipelineStore.currentPipeline,getPipeline:e.pipelineStore.getPipeline}}))(xe=Object(ae.c)(xe=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={openConfig:!1,openOutput:!1},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"componentDidMount",value:function(){this.props.getPipeline(this.props.match.params.pipelineId)}},{key:"render",value:function(){var e=this,t=this.props.currentPipeline;return null===t?Q.a.createElement(qe,null):Q.a.createElement(qe,null,pt.a.isEmpty(this.props.currentPipeline)?Q.a.createElement(Je.a,{size:"large",style:{textAlign:"center"}},Q.a.createElement(Ve.a,{message:"Loading pipeline details",description:"Right now is really slow :/",type:"info"})):Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(nt.a,{span:12},Q.a.createElement(ot.a,{title:t.name,bordered:!0,style:{margin:"5px 5px",height:"100%"}},Q.a.createElement("pre",null,"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Pipeline ID")),": ",t.id,Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Pipeline Name")),": ",t.name,Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Description")),": ",t.description,Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Start Timestamp")),": ",t.start_timestamp,Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"End Timestamp")),": ",t.end_timestamp,Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Status")),": ",t.status,Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Config")),": ",Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(dt.a,{type:"primary",size:"small",onClick:function(){return e.setState({openConfig:!0,openOutput:!1})}},"Click Me To View")),Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Output")),": ",t.output?Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(dt.a,{type:"primary",size:"small",onClick:function(){return e.setState({openOutput:!0,openConfig:!1})}},"Click Me To View")):"None",Q.a.createElement("br",null),Q.a.createElement("br",null)))),Q.a.createElement(nt.a,{span:12},this.state.openConfig?Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(at.a,null,Q.a.createElement(Et,{autosize:!0,title:"Config",wrap:"hard",value:JSON.stringify(t.config,null,2)})),Q.a.createElement(at.a,null,Q.a.createElement(dt.a,{style:{margin:"10px",float:"right"},onClick:function(){return e.setState({openConfig:!1})}},"Cancel"))):null,this.state.openOutput?Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(at.a,null,Q.a.createElement(Et,{autosize:!0,title:"Output",wrap:"hard",value:t.output?t.output.replace("\n","&#10;"):""})),Q.a.createElement(at.a,null,Q.a.createElement(dt.a,{style:{margin:"10px",float:"right"},onClick:function(){return e.setState({openOutput:!1})}},"Cancel"))):null)))}}]),t}(Q.a.Component))||xe)||xe,yt=a(199),Nt=a(106),Ot=a(138),St=a(400),vt=a(394),jt=a(11),wt=a(396),At=a(192),xt=a.n(At),Ct=a(193),kt=a(134),It=a.n(kt),Tt={NodeTypes:{empty:{typeText:"wat",shapeId:"#empty",shape:Q.a.createElement("symbol",{viewBox:"0 0 50 50",id:"empty",key:"0"},Q.a.createElement("rect",{x:"0",y:"0",height:"50",width:"50"}))}},NodeSubtypes:{},EdgeTypes:{emptyEdge:{shapeId:"#emptyEdge",shape:Q.a.createElement("symbol",{viewBox:"0 0 50 50",id:"emptyEdge",key:"0"},Q.a.createElement("circle",{cx:"25",cy:"25",r:"8",fill:"currentColor"}," "))}}},Gt=Object(ae.b)((function(e){return{selectedNode:e.pipelineStore.selectedNode,graphNodes:e.pipelineStore.graphNodes,graphEdges:e.pipelineStore.graphEdges,setGraphNodes:e.pipelineStore.setGraphNodes,setGraphEdges:e.pipelineStore.setGraphEdges,setSelectedNode:e.pipelineStore.setSelectedNode,setSelectedEdge:e.pipelineStore.setSelectedEdge,adapters:e.adapterStore.adapters,graphCreated:e.pipelineStore.graphCreated}}))(Ce=Object(ae.c)(Ce=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={currentAction:"",currentAdapter:"",currentAdapterName:"",currentToNode:"",fromNodeOutput:"",toNodeInput:"",nameAdapter:!1},a.onUpdateNode=function(e){var t=a.props,n=t.graphNodes,r=t.setGraphNodes,l=t.setSelectedNode,i=n.filter((function(t){return t.id===e.id}))[0];console.log(i),l(i),r(n.map((function(t){return t.id===e.id?e:t})))},a.createAdapterMenu=function(){var e=a.props.adapters,t=e.map((function(e){return e.func_type})).filter((function(e,t,a){return a.indexOf(e)===t})),n=t.filter((function(e){return!e.includes("Transformation")})),r=t.filter((function(e){return e.includes("Transformation")}));return r=r.sort((function(e,t){return e.includes("Other")?1:t.includes("Other")?-1:e>t?1:-1})),Q.a.createElement(He.a,{onClick:function(e){var t=e.item.props.eventKey,n=a.findBoundingBoxGraphNodes(),r=n.maxX,l=n.maxY,i=(n.minX,n.minY),o=n.maxId,c={id:"Adapter_".concat(o+1),title:"".concat(t),x:300+r,y:(l+i)/2,adapter:JSON.parse(JSON.stringify(a.props.adapters.filter((function(e){return e.id===t}))[0]))},p=a.props.graphNodes;p.push(c),a.props.setGraphNodes(p),a.props.setSelectedNode(null),a.setState({currentAction:"",currentAdapter:""})}},n.map((function(t,a){return Q.a.createElement(It.a,{key:"adt-".concat(a),title:t},e.filter((function(e){return e.func_type===t})).map((function(e,t){return Q.a.createElement(He.a.Item,{key:e.id},pt.a.isEmpty(e.friendly_name)?e.id:e.friendly_name)})))})),Q.a.createElement(He.a.ItemGroup,{title:"Transformers"},r.map((function(t,a){return Q.a.createElement(It.a,{key:"trans-adt-".concat(a),title:t.split(" Transformation")[0]},e.filter((function(e){return e.func_type===t})).map((function(e,t){return Q.a.createElement(He.a.Item,{key:e.id,disabled:!0===e.is_fake},pt.a.isEmpty(e.friendly_name)?e.id:e.friendly_name)})))}))))},a.createFromNodeOutputMenu=function(){var e=a.props.selectedNode?a.props.selectedNode.id:"",t=a.props.graphNodes.filter((function(t){return t.id===e}))[0].adapter;return Q.a.createElement(He.a,{onClick:function(e){var t=e.item;a.setState({fromNodeOutput:t.props.children})}},Object.keys(t.outputs).map((function(e,t){return Q.a.createElement(He.a.Item,{key:"output-".concat(t)},e)})))},a.createToNodeMenu=function(){var e=a.props.selectedNode?a.props.selectedNode.id:"";return Q.a.createElement(He.a,{onClick:function(e){var t=e.item;a.setState({currentToNode:t.props.children})}},a.props.graphNodes.filter((function(t){return t.id!==e})).map((function(e,t){return Q.a.createElement(He.a.Item,{key:"".concat(t)},e.id)})))},a.createToNodeInputMenu=function(){var e=a.props.graphNodes.filter((function(e){return e.id===a.state.currentToNode}))[0].adapter;return Q.a.createElement(He.a,{onClick:function(e){var t=e.item;a.setState({toNodeInput:t.props.children})}},Object.keys(e.inputs).map((function(e,t){return Q.a.createElement(He.a.Item,{key:"input-".concat(t)},e)})))},a.createNodeEdgeMenu=function(){var e=a.props.selectedNode?a.props.selectedNode.id:"",t=a.props.graphEdges.filter((function(t){return t.source===e||t.target===e}));return Q.a.createElement(He.a,{onClick:function(e){var t=e.key.split("-");a.setState({fromNodeOutput:t[1],currentToNode:t[2],toNodeInput:t[3]})}},t.map((function(e,t){return Q.a.createElement(He.a.Item,{key:"".concat(e.source,"-").concat(e.output,"-").concat(e.target,"-").concat(e.input)},"".concat(e.source,".").concat(e.output," => ").concat(e.target,".").concat(e.input))})))},a.isAlphaNumericUnderscore=function(e){if(0===e.length)return!0;for(var t=e.split("_"),a=0;a<t.length;a++)if(null===t[a].match(/^[0-9a-zA-Z]+$/g))return!1;return!0},a.findBoundingBoxGraphNodes=function(){for(var e=a.props.graphNodes,t=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,i=-1,o=0;o<e.length;o++){var c=Number(e[o].x),p=Number(e[o].y);o>i&&(i=o),c>t&&(t=c),c<r&&(r=c),p>n&&(n=p),p<l&&(l=p)}return i<0&&(t=300,n=300,r=300,l=300),{maxX:t,maxY:n,minX:r,minY:l,maxId:i}},a.onClear=function(){a.props.setSelectedNode(null),a.setState({currentAction:"",currentAdapter:"",currentToNode:"",toNodeInput:"",fromNodeOutput:"",currentAdapterName:""})},a.onSelectEdge=function(e){a.props.setSelectedNode(null),a.props.setSelectedEdge(e)},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"componentDidUpdate",value:function(e){!1===e.graphCreated&&!0===this.props.graphCreated&&this.setState({currentAction:"",currentAdapter:"",currentAdapterName:"",currentToNode:"",fromNodeOutput:"",toNodeInput:"",nameAdapter:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.graphNodes,n=t.graphEdges,r=t.selectedNode;console.log("Number of edges is: ".concat(n.length));var l=r?r.id:"";return Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(at.a,{style:{margin:"20px 10px"}},pt.a.isEmpty(l)&&pt.a.isEmpty(this.state.currentAction)?Q.a.createElement("p",null,Q.a.createElement(dt.a,{style:{margin:"5px"},onClick:function(){return e.setState({currentAction:"add-a-new-node"})}},"Add A New Adapter")):null,l&&pt.a.isEmpty(this.state.currentAction)?Q.a.createElement("span",null,Q.a.createElement("p",null,"Select an action on ".concat(l,": ")),Q.a.createElement(dt.a,{style:{margin:"5px"},onClick:function(){return e.setState({currentAction:"delete-this-node"})}},"Delete This Node"),Q.a.createElement(dt.a,{style:{margin:"5px"},onClick:function(){return e.props.setSelectedNode(null)},type:"dashed"},"Cancel")):null,"add-a-new-node"===this.state.currentAction?Q.a.createElement("span",null,Q.a.createElement("p",null,"Add A New Adapter: "),Q.a.createElement(ut.a,{overlay:this.createAdapterMenu()},this.state.currentAdapter?Q.a.createElement("b",null,"Selected Adapter: ".concat(this.state.currentAdapter)):Q.a.createElement(dt.a,null,Q.a.createElement("b",null,"Select An Adapter"))),Q.a.createElement(wt.a,{title:"Naming new adapter...",visible:this.state.nameAdapter,onOk:function(){console.log("adding a new node to the graph");var t=e.findBoundingBoxGraphNodes(),n=t.maxX,r=t.maxY,l=t.minX,i=t.minY,o=t.maxId,c={id:e.state.currentAdapterName?e.state.currentAdapterName:"Adapter_".concat(o+1),title:"".concat(e.state.currentAdapter),x:300+(n+l)/2,y:(r+i)/2,adapter:e.props.adapters.filter((function(t){return t.id===e.state.currentAdapter}))[0]},p=a;p.push(c),e.props.setGraphNodes(p),e.props.setSelectedNode(null),e.setState({currentAction:"",currentAdapter:"",currentAdapterName:"",nameAdapter:!1})},okButtonProps:{disabled:!this.isAlphaNumericUnderscore(this.state.currentAdapterName)},onCancel:function(){return e.setState({currentAction:"",currentAdapter:"",currentAdapterName:"",nameAdapter:!1})}},Q.a.createElement("p",null,'Enter adapter name (Please only use "_" as delimiter):',Q.a.createElement(Be.a,{value:this.state.currentAdapterName,onChange:function(t){var a=t.target;return e.setState({currentAdapterName:a.value})}}),Q.a.createElement("span",{style:{color:"gray"}},"* Default name to Adapter_#")))):null,"add-a-new-edge"===this.state.currentAction?Q.a.createElement("span",null,Q.a.createElement("p",null,"Add A New Edge From ".concat(l," "),Q.a.createElement(ut.a,{overlay:this.createFromNodeOutputMenu()},this.state.fromNodeOutput?Q.a.createElement("b",null,"".concat(this.state.fromNodeOutput)):Q.a.createElement(dt.a,null,Q.a.createElement("b",null,"Select Node Output")))," To ",Q.a.createElement(ut.a,{overlay:this.createToNodeMenu()},this.state.currentToNode?Q.a.createElement("b",null," ".concat(this.state.currentToNode)):Q.a.createElement(dt.a,null,Q.a.createElement("b",null,"Select Node Output"))),"   ",pt.a.isEmpty(this.state.currentToNode)?null:Q.a.createElement(ut.a,{overlay:this.createToNodeInputMenu()},this.state.toNodeInput?Q.a.createElement("b",null,"".concat(this.state.toNodeInput)):Q.a.createElement(dt.a,null,Q.a.createElement("b",null,"Select Node Input"))),Q.a.createElement(dt.a,{style:{float:"right",margin:"5px"},disabled:pt.a.isEmpty(this.state.toNodeInput),onClick:function(){console.log("adding a new edge to the graph");var t=e.props.graphEdges;t.push({target:e.state.currentToNode,source:l||"",type:"empty",input:e.state.toNodeInput,output:e.state.fromNodeOutput}),e.props.setGraphEdges(t),e.props.setSelectedNode(null),e.setState({currentAction:"",currentAdapter:"",currentToNode:"",toNodeInput:"",fromNodeOutput:""})},type:"primary"},"OK"),Q.a.createElement(dt.a,{style:{float:"right",margin:"5px"},onClick:this.onClear},"Clear"))):null,"delete-this-node"===this.state.currentAction?Q.a.createElement("span",null,Q.a.createElement("p",null,"Are you sure you want to delete this node? All inputs/edges of this node will be lost."),Q.a.createElement(dt.a,{style:{float:"right",margin:"5px"},type:"danger",onClick:function(){console.log("deleting this node in the graph");var t=e.props.selectedNode?e.props.selectedNode.id:"",a=e.props.graphNodes.filter((function(e){return e.id!==t})),n=e.props.graphEdges.filter((function(e){return e.target!==t&&e.source!==t}));e.props.setGraphNodes(a),e.props.setGraphEdges(n),e.props.setSelectedNode(null),e.setState({currentAction:"",currentAdapter:""})}},"Yes"),Q.a.createElement(dt.a,{style:{float:"right",margin:"5px"},onClick:this.onClear,type:"primary"},"No")):null,"delete-its-edge"===this.state.currentAction?Q.a.createElement("span",null,Q.a.createElement("p",null,"Select An Edge From ".concat(l,":")," "),Q.a.createElement(ut.a,{overlay:this.createNodeEdgeMenu()},this.state.currentToNode?Q.a.createElement("b",null,"Deleting The Edge From ".concat(l,".").concat(this.state.fromNodeOutput,"\n                    To ").concat(this.state.currentToNode,".").concat(this.state.toNodeInput)):Q.a.createElement(dt.a,null,Q.a.createElement("b",null,"Select Node Edges"))),Q.a.createElement(dt.a,{style:{float:"right",margin:"5px"},type:"danger",onClick:function(){console.log("deleting this node in the graph");var t=e.props.selectedNode?e.props.selectedNode.id:"",a=e.props,n=a.graphEdges,r=a.setGraphEdges,l=a.setSelectedNode,i=e.state,o=i.currentToNode,c=i.fromNodeOutput,p=i.toNodeInput;r(n.filter((function(e){return e.target!==o||e.source!==t||e.input!==p||e.output!==c}))),l(null),e.setState({currentAction:"",currentAdapter:"",currentToNode:""})},disabled:""===this.state.currentToNode},"Yes"),Q.a.createElement(dt.a,{style:{float:"right",margin:"5px"},onClick:this.onClear,type:"primary"},"No")):null),Q.a.createElement(at.a,{style:{margin:"20px 10px",height:"100%"}},Q.a.createElement(Ct.GraphView,{ref:"GraphView",nodeKey:"id",nodes:a,edges:n,selected:{},nodeTypes:Tt.NodeTypes,nodeSubtypes:Tt.NodeSubtypes,edgeTypes:Tt.EdgeTypes,onUpdateNode:this.onUpdateNode,onSelectNode:function(){return console.log("does nothing")},onCreateNode:function(){return console.log("does nothing")},onDeleteNode:function(){return console.log("does nothing")},onSelectEdge:this.onSelectEdge,onCreateEdge:function(){return console.log("does nothing")},onSwapEdge:function(){return console.log("does nothing")},onDeleteEdge:function(){return console.log("does nothing")},renderNodeText:function(e,t,a){var n=e.title;if("string"===typeof t){var r=t.split("-")[1];return Q.a.createElement("text",{textAnchor:"middle",x:0,y:0,fontSize:"smaller"},!!n&&Q.a.createElement("tspan",{x:0,dy:-18,opacity:"1"},n),!!r&&Q.a.createElement("tspan",{x:0,dy:36,opacity:"1"},r))}},renderNode:function(){return Q.a.createElement("g",{className:"shape",height:100,width:100},Q.a.createElement("rect",{x:-50,y:-50,width:100,height:100,fill:"#D9EE87",fillOpacity:"1"}))},maxZoom:1})))}}]),t}(Q.a.Component))||Ce)||Ce,Ft=Object(ae.b)((function(e){return{selectedNode:e.pipelineStore.selectedNode,graphNodes:e.pipelineStore.graphNodes,graphEdges:e.pipelineStore.graphEdges,setGraphEdges:e.pipelineStore.setGraphEdges,setSelectedNode:e.pipelineStore.setSelectedNode}}))(ke=Object(ae.c)(ke=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).createEdgeMenu=function(){for(var e=a.props,t=e.graphNodes,n=e.graphEdges,r=e.selectedNode,l=e.setGraphEdges,i=e.input,o=e.wiredEdges,c=t.filter((function(e){return e.id!==r.id})),p=[],s=function(e){var t=c[e].adapter.outputs,a=Object.keys(t).map((function(t){return{node:c[e].id,output:t}}));p.push.apply(p,Object(Nt.a)(a))},u=0;u<c.length;u++)s(u);return Q.a.createElement(He.a,{onClick:function(e){var t=e.item.props.eventKey.split("-"),a=n;"null"===t[1]&&"null"===t[2]?a=a.filter((function(e){return!(e.target===r.id&&e.input===i)})):(o.length>0&&(a=a.filter((function(e){return!o.includes(e)}))),a.push({target:r.id,source:t[1],input:i,output:t[2]})),l(a)}},Q.a.createElement(He.a.Item,{key:"menu-null-null-0"},"None"),p.map((function(e,t){return Q.a.createElement(He.a.Item,{key:"menu-".concat(e.node,"-").concat(e.output,"-").concat(t)},"Node ".concat(e.node," - output name: ").concat(e.output))})))},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){var e=this.props.wiredEdges,t=this.createEdgeMenu();return Q.a.createElement(ut.a,{overlay:t},Q.a.createElement(Be.a,{disabled:!0,type:"text",value:pt.a.isEmpty(e)?"Select from possible outputs...":"".concat(e[0].source,".").concat(e[0].output),style:{padding:"5px",border:"2px solid",borderRadius:"5px",width:"100%"}}))}}]),t}(Q.a.Component))||ke)||ke,Pt=Object(ae.b)((function(e){return{selectedNode:e.pipelineStore.selectedNode,graphNodes:e.pipelineStore.graphNodes,setGraphNodes:e.pipelineStore.setGraphNodes}}))(Ie=Object(ae.c)(Ie=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={hovered:!1},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.selectedNode,n=t.input,r=t.graphNodes,l=t.setGraphNodes,i=t.referredAdapter;if(null!==a){console.log("Look at me! "),console.log(a.id);var o=a.adapter;return Q.a.createElement("p",{onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},Q.a.createElement("textarea",{name:n,value:o.inputs[n].val||"",onChange:function(e){var t=e.currentTarget,n=r;n.filter((function(e){return e.id===a.id}))[0].adapter.inputs[t.name].val=t.value,l(n)},wrap:"soft",style:{padding:"5px",border:"2px solid",borderRadius:"5px",width:"100%"}}),this.state.hovered?Q.a.createElement("span",{style:{color:"red"}},'Hint: Please enter a valid string, for instance: "'.concat(i.example[n],'"')):null)}}}]),t}(Q.a.Component))||Ie)||Ie,Dt=Object(ae.b)((function(e){return{selectedNode:e.pipelineStore.selectedNode,graphNodes:e.pipelineStore.graphNodes,setGraphNodes:e.pipelineStore.setGraphNodes}}))(Te=Object(ae.c)(Te=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={hovered:!1},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.selectedNode,n=t.input,r=t.graphNodes,l=t.setGraphNodes,i=t.referredAdapter;if(null!==a){var o=a.adapter;return Q.a.createElement("p",{onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},Q.a.createElement("input",{name:n,value:o.inputs[n].val||"",onChange:function(e){var t=e.currentTarget,n=r;n.filter((function(e){return e.id===a.id}))[0].adapter.inputs[t.name].val=t.value,l(n)},style:{padding:"5px",border:"2px solid",borderRadius:"5px",width:"100%"}}),this.state.hovered?Q.a.createElement("span",{style:{color:"red"}},'Hint: Please enter a valid file path, for instance: "'.concat(i.example[n],'"')):null)}}}]),t}(Q.a.Component))||Te)||Te,zt=Object(ae.b)((function(e){return{selectedNode:e.pipelineStore.selectedNode,graphNodes:e.pipelineStore.graphNodes,graphEdges:e.pipelineStore.graphEdges,setGraphNodes:e.pipelineStore.setGraphNodes,setGraphEdges:e.pipelineStore.setGraphEdges,setSelectedNode:e.pipelineStore.setSelectedNode,adapters:e.adapterStore.adapters,graphCreated:e.pipelineStore.graphCreated}}))(Ge=Object(ae.c)(Ge=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={showAdapterSpecs:!1},a.createNodeInput=function(e,t,n,r,l){var i=a.props.graphEdges,o=t.adapter;if("dataset"===o.inputs[n].id){var c=i.filter((function(e){return e.target===t.id&&e.input===n}));return Q.a.createElement("div",{key:"input-".concat(r),style:{margin:"20px 20px"}},"".concat(n,": "),l?null:Q.a.createElement("span",{style:{color:"red"}},"*"),Q.a.createElement(Ft,{selectedNode:t,graphNodes:a.props.graphNodes,graphEdges:a.props.graphEdges,setGraphEdges:a.props.setGraphEdges,setSelectedNode:a.props.setSelectedNode,input:n,wiredEdges:c}))}return"file_path"===o.inputs[n].id?Q.a.createElement("div",{key:"input-".concat(r),style:{margin:"20px 20px"}},"".concat(n,": "),l?null:Q.a.createElement("span",{style:{color:"red"}},"*"),Q.a.createElement(Dt,{selectedNode:t,graphNodes:a.props.graphNodes,setGraphNodes:a.props.setGraphNodes,input:n,referredAdapter:e})):Q.a.createElement("div",{key:"input-".concat(r),style:{margin:"20px 20px"}},"".concat(n,": "),l?null:Q.a.createElement("span",{style:{color:"red"}},"*"),Q.a.createElement(Pt,{selectedNode:t,graphNodes:a.props.graphNodes,setGraphNodes:a.props.setGraphNodes,input:n,referredAdapter:e}))},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"componentDidUpdate",value:function(e){!1===e.graphCreated&&!0===this.props.graphCreated&&this.setState({showAdapterSpecs:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.selectedNode,n=t.graphEdges,r=t.adapters,l=a?a.adapter:null;if(null===l)return null;var i=r.filter((function(e){return e.id===l.id}))[0];return null===a?null:Q.a.createElement(Q.a.Fragment,null,Q.a.createElement("p",{style:{margin:"20px 20px"}},"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Function Friendly Name")),": ",i.friendly_name,Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Function Type")),": ",i.func_type,Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Description")),": ",i.description,Q.a.createElement("br",null)),Q.a.createElement("p",{style:{margin:"20px 20px"}},Q.a.createElement("b",null,"Inputs to adapter: "),Q.a.createElement(dt.a,{onClick:function(){return e.setState({showAdapterSpecs:!0})}},"See Input Specs"),Q.a.createElement(wt.a,{title:"Adpater Inputs Detail",visible:this.state.showAdapterSpecs,onOk:function(){return e.setState({showAdapterSpecs:!1})},onCancel:function(){return e.setState({showAdapterSpecs:!1})}},Q.a.createElement("pre",null,pt.a.isEmpty(i.inputs)?Q.a.createElement("p",null,"None"):Object.keys(i.inputs).map((function(e,t){return Q.a.createElement("pre",{key:"input-".concat(t)},Q.a.createElement("b",null,Q.a.createElement("u",null,e)),":",Q.a.createElement("br",null),"Type: ",Q.a.createElement("input",{value:i.inputs[e].id,readOnly:!0}),";",Q.a.createElement("br",null),"Optional: ",Q.a.createElement("input",{value:JSON.stringify(i.inputs[e].optional),readOnly:!0}))})),Q.a.createElement("br",null)))),Q.a.createElement("form",null,Object.keys(i.inputs).filter((function(e){return!i.inputs[e].optional})).map((function(t,n){return e.createNodeInput(i,a,t,n,!1)})),Object.keys(i.inputs).filter((function(e){return i.inputs[e].optional})).map((function(t,n){return e.createNodeInput(i,a,t,n,!0)}))),Q.a.createElement("p",{style:{margin:"20px 20px"}},Q.a.createElement("b",null,"Wiring of this adapter:")),n.filter((function(e){return e.source===a.id||e.target===a.id})).map((function(e,t){return Q.a.createElement("p",{style:{margin:"20px 20px"},key:"edge-".concat(t)},"\u2022 ","".concat(e.source),".",e.output," ",Q.a.createElement("b",null,"=>")," ","".concat(e.target),".",e.input)})))}}]),t}(Q.a.Component))||Ge)||Ge,_t=Object(ae.b)((function(e){return{selectedEdge:e.pipelineStore.selectedEdge,graphNodes:e.pipelineStore.graphNodes,adapters:e.adapterStore.adapters}}))(Fe=Object(ae.c)(Fe=function(e){function t(){return Object(oe.a)(this,t),Object(_e.a)(this,Object(Me.a)(t).apply(this,arguments))}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedEdge,a=e.graphNodes,n=e.adapters;if(null===t)return null;var r=t.source,l=t.target,i=t.input,o=t.output,c=a.filter((function(e){return e.id===r}))[0].adapter,p=a.filter((function(e){return e.id===l}))[0].adapter,s=n.filter((function(e){return e.id===c.id}))[0],u=n.filter((function(e){return e.id===p.id}))[0];return Q.a.createElement(Q.a.Fragment,null,Q.a.createElement("p",{style:{margin:"20px 20px",fontSize:"1em"}},"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"From Adapter")),": ",s.friendly_name?s.friendly_name:s.id,Q.a.createElement("br",null),Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Output")),": ",o,Q.a.createElement("br",null),Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"To Adapter")),":",u.friendly_name?u.friendly_name:u.id,Q.a.createElement("br",null),Q.a.createElement("br",null),Q.a.createElement("br",null),"\u2022 ",Q.a.createElement("b",null,Q.a.createElement("u",null,"Input")),": ",i,Q.a.createElement("br",null)))}}]),t}(Q.a.Component))||Fe)||Fe,Mt=Be.a.TextArea,Lt=Ot.a.TabPane,Ut=Object(ae.b)((function(e){return{uploadedPipelineData:e.pipelineStore.uploadedPipelineData,graphCreated:e.pipelineStore.graphCreated,location:e.routing.location,createPipeline:e.pipelineStore.createPipeline,setGraphCreated:e.pipelineStore.setGraphCreated,setUploadedPipelineData:e.pipelineStore.setUploadedPipelineData,setUploadedPipelineFromDcat:e.pipelineStore.setUploadedPipelineFromDcat,adapters:e.adapterStore.adapters,getAdapters:e.adapterStore.getAdapters,selectedNode:e.pipelineStore.selectedNode,selectedEdge:e.pipelineStore.selectedEdge,graphNodes:e.pipelineStore.graphNodes,graphEdges:e.pipelineStore.graphEdges,setGraphNodes:e.pipelineStore.setGraphNodes,setGraphEdges:e.pipelineStore.setGraphEdges,setSelectedNode:e.pipelineStore.setSelectedNode,setSelectedEdge:e.pipelineStore.setSelectedEdge}}))(Pe=Object(ae.c)(Pe=function(e){function t(){var e,a;Object(oe.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(_e.a)(this,(e=Object(Me.a)(t)).call.apply(e,[this].concat(r)))).state={currentFileList:[],pipelineName:"",pipelineDescription:"",willSubmit:!1},a.handleFileChange=function(e){var t=Object(Nt.a)(e.fileList).slice(-1)[0];if(t.response&&t.response.error)St.a.info("".concat(t.response.error));else if(t.response&&t.response.data){var n=t.response.data;a.props.setGraphCreated(!0),a.props.setGraphNodes(a.createGraphNodes(n.nodes)),a.props.setGraphEdges(a.createGraphEdges(n.edges))}a.setState({currentFileList:[t]})},a.handleSubmit=function(){var e=a.state,t=e.pipelineName,n=e.pipelineDescription,r=a.props,l=r.graphEdges,i=r.graphNodes;a.props.createPipeline(t,n,a.createNodes(i),a.createEdges(l)),a.props.setUploadedPipelineData(null),a.props.setGraphCreated(!1),setTimeout((function(){a.props.history.push("/pipelines")}),1e3)},a.handleCancel=function(){a.props.setUploadedPipelineData(null),a.props.setGraphNodes([]),a.props.setGraphEdges([]),a.props.setGraphCreated(!1),a.props.setSelectedNode(null),a.setState({currentFileList:[],pipelineName:"",pipelineDescription:""}),a.props.history.push("/pipeline/create")},a.createGraphNodes=function(e){return e.map((function(e,t){var n=e.adapter.split(".")[1],r=a.props.adapters.filter((function(e){return e.id===n}))[0];return{id:e.id,title:n,x:100+200*t,y:100,adapter:{id:n,description:r.description,inputs:e.inputs,outputs:e.outputs}}}))},a.createNodes=function(e){return e.map((function(e){return{id:e.id,adapter:"funcs.".concat(e.title),inputs:e.adapter.inputs,outputs:e.adapter.outputs}}))},a.createGraphEdges=function(e){return e.map((function(e){return Object(yt.a)({},e,{type:"emptyEdge"})}))},a.createEdges=function(e){return e.map((function(e){return{source:e.source,target:e.target,input:e.input,output:e.output}}))},a}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=xt.a.parse(this.props.location.search);e&&e.dcatId&&"string"===typeof e.dcatId&&this.props.setUploadedPipelineFromDcat(e.dcatId)}else this.props.history.push("/pipeline/create");this.props.getAdapters()}},{key:"componentDidUpdate",value:function(e){if(e.uploadedPipelineData!==this.props.uploadedPipelineData&&null!==this.props.uploadedPipelineData){var t=this.props,a=t.uploadedPipelineData,n=t.setGraphNodes;(0,t.setGraphEdges)(this.createGraphEdges(a.edges)),n(this.createGraphNodes(a.nodes))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.graphCreated,n=t.selectedNode;return a?Q.a.createElement(qe,null,Q.a.createElement(Ot.a,{defaultActiveKey:"pipeline",style:{overflowY:"auto",height:"100%"}},Q.a.createElement(Lt,{tab:"Pipeline",key:"pipeline",style:{height:"600px"}},Q.a.createElement(nt.a,{span:16,style:{height:"90%"}},Q.a.createElement(Gt,{selectedNode:n,graphNodes:this.props.graphNodes,graphEdges:this.props.graphEdges,setGraphNodes:this.props.setGraphNodes,setGraphEdges:this.props.setGraphEdges,setSelectedNode:this.props.setSelectedNode,setSelectedEdge:this.props.setSelectedEdge,adapters:this.props.adapters,graphCreated:this.props.graphCreated})),Q.a.createElement(nt.a,{span:8},Q.a.createElement(at.a,{style:{margin:"20px 0px"}},Q.a.createElement(dt.a,{key:"discard",onClick:this.handleCancel,style:{margin:"10px",float:"right"}},"Discard"),Q.a.createElement(dt.a,{key:"submit",type:"primary",onClick:function(){return e.setState({willSubmit:!0})},style:{margin:"10px",float:"right"}},"Submit"),Q.a.createElement(wt.a,{title:"Submitting current pipeline...",visible:this.state.willSubmit,onOk:function(){e.handleSubmit(),e.setState({willSubmit:!1})},onCancel:function(){return e.setState({willSubmit:!1})}},Q.a.createElement(at.a,{style:{margin:"20px 10px"}},Q.a.createElement(Be.a,{value:this.state.pipelineName,onChange:function(t){return e.setState({pipelineName:t.target.value})},placeholder:"Enter Pipeline Name: (Optional)"})),Q.a.createElement(at.a,{style:{margin:"20px 10px"}},Q.a.createElement(Mt,{rows:16,value:this.state.pipelineDescription,onChange:function(t){var a=t.target;return e.setState({pipelineDescription:a.value})},placeholder:"Enter Pipeline Description: (Optional)"})))),Q.a.createElement(at.a,{style:{margin:"20px 0px"}},null===this.props.selectedNode?null:Q.a.createElement(zt,{selectedNode:n,graphNodes:this.props.graphNodes,graphEdges:this.props.graphEdges,setGraphNodes:this.props.setGraphNodes,setGraphEdges:this.props.setGraphEdges,setSelectedNode:this.props.setSelectedNode,adapters:this.props.adapters,graphCreated:this.props.graphCreated}),null===this.props.selectedEdge?null:Q.a.createElement(_t,{selectedEdge:this.props.selectedEdge,graphNodes:this.props.graphNodes,adapters:this.props.adapters})))))):Q.a.createElement(qe,null,Q.a.createElement(nt.a,{span:12,style:{textAlign:"center",height:"100%"}},Q.a.createElement(dt.a,{size:"large",type:"primary",icon:"plus",onClick:function(){return e.props.setGraphCreated(!0)},style:{marginTop:"30vh"}},"Click To Start")),Q.a.createElement(nt.a,{span:12,style:{height:"100%"}},Q.a.createElement(vt.a.Dragger,{name:"files",action:"".concat("/api","/pipeline/upload_config"),accept:".json,.yml",onChange:this.handleFileChange,multiple:!1,fileList:this.state.currentFileList,style:{height:"100%"}},Q.a.createElement("p",{className:"ant-upload-drag-icon"},Q.a.createElement(jt.a,{type:"inbox"})),Q.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),Q.a.createElement("p",{className:"ant-upload-hint"},"Support for single upload."))))}}]),t}(Q.a.Component))||Pe)||Pe,Rt=(a(388),Object(ae.b)((function(e){return{routing:e.routing,pipelineStore:e.pipelineStore,adapterStore:e.adapterStore}}))(De=Object(ae.c)(De=function(e){function t(){return Object(oe.a)(this,t),Object(_e.a)(this,Object(Me.a)(t).apply(this,arguments))}return Object(Le.a)(t,e),Object(ze.a)(t,[{key:"render",value:function(){return Q.a.createElement(Ue.a,null,Q.a.createElement(Re.c,null,Q.a.createElement(Re.a,{exact:!0,path:"/",component:it}),Q.a.createElement(Re.a,{exact:!0,path:"/adapters",component:st}),Q.a.createElement(Re.a,{exact:!0,path:"/pipelines",component:ft}),Q.a.createElement(Re.a,{path:"/pipelines/:pipelineId",component:bt}),Q.a.createElement(Re.a,{exact:!0,path:"/pipeline/create",component:Ut}),Q.a.createElement(Re.a,{component:Ye})))}}]),t}(Q.a.Component))||De)||De);te.a.render(Q.a.createElement(ae.a,Ee,Q.a.createElement(ne.a,{history:be},Q.a.createElement(Rt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[202,1,2]]]);
//# sourceMappingURL=main.cc8d08c8.chunk.js.map