{"version":3,"sources":["images/dt_flow.jpg","store/AdapterStore.ts","store/PipelineStore.ts","store/ErrorStore.ts","store/index.ts","serviceWorker.ts","components/NotFound404.tsx","components/Layout.tsx","components/Home.tsx","components/Adapters.tsx","components/PipelineTimeline.tsx","components/PipelineDetail.tsx","components/PipelineGraph.tsx","components/InputComponentWired.tsx","components/InputComponentText.tsx","components/InputComponentFilePath.tsx","components/AdapterInputs.tsx","components/EdgeDetail.tsx","components/PipelineEditor.tsx","App.tsx","index.tsx"],"names":["module","exports","AdapterStore","action","bound","errorStore","this","observable","axios","get","then","resp","adapters","data","console","log","PipelineStore","isLoading","hasFailed","errorData","Promise","resolve","startFetch","pipelines","successFetch","error","failedFetch","response","pipelineId","currentPipeline","uploadedPipelineData","dcatId","graphCreated","pipelineName","pipelineDescription","graphNodes","graphEdges","post","name","description","nodes","edges","node","selectedNode","selectedEdge","edge","ErrorStore","routingStore","RouterStore","stores","routing","pipelineStore","adapterStore","history","syncHistoryWithStore","createBrowserHistory","Boolean","window","location","hostname","match","NotFound404","style","textAlign","React","Component","Header","Layout","Content","Footer","Search","Input","MyLayout","inject","observer","state","selectedKey","children","props","className","height","theme","mode","openKeys","lineHeight","onClick","key","setState","Item","to","float","placeholder","onSearch","value","padding","background","minHeight","overflow","size","message","type","color","JSON","stringify","verticalAlign","Title","Typography","Paragraph","HomeComponent","fontSize","span","src","dtFlow","alt","defaultProps","AdapterComponent","getAdapters","isCardLoading","length","map","ad","index","title","id","bordered","loading","margin","hoverable","friendly_name","func_type","_","isEmpty","inputs","Object","keys","inputKey","idx","readOnly","optional","outputs","outputKey","PipelineTimelineComponent","getPipelines","timestampDropdownMenu","statusColorCode","running","finished","failed","Fragment","align","overlay","icon","content","shape","pl","status","level","end_timestamp","start_timestamp","disabled","marginRight","TextArea","PipelineComponent","getPipeline","openConfig","openOutput","params","output","autosize","wrap","config","replace","GraphConfig","NodeTypes","empty","typeText","shapeId","viewBox","x","y","width","NodeSubtypes","EdgeTypes","emptyEdge","cx","cy","r","fill","PipelineGraphComponent","setGraphNodes","setGraphEdges","setSelectedNode","setSelectedEdge","currentAction","currentAdapter","currentAdapterName","currentToNode","fromNodeOutput","toNodeInput","nameAdapter","onUpdateNode","filter","n","v","createAdapterMenu","currAdapters","currAdapterTypes","i","a","indexOf","nonTransAdapters","adt","includes","transAdapters","sort","b","item","eventKey","findBoundingBoxGraphNodes","maxX","maxY","minY","minX","maxId","newNode","adapter","parse","newNodes","push","ItemGroup","split","is_fake","createFromNodeOutputMenu","selected","k","createToNodeMenu","createToNodeInputMenu","createNodeEdgeMenu","nodeEdges","e","source","target","updates","input","isAlphaNumericUnderscore","check","subStrings","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","nodeX","nodeY","onClear","onSelectEdge","prevProps","visible","onOk","okButtonProps","onCancel","onChange","newEdges","ref","nodeKey","nodeTypes","nodeSubtypes","edgeTypes","onSelectNode","onCreateNode","onDeleteNode","onCreateEdge","onSwapEdge","onDeleteEdge","renderNodeText","isSelected","customName","textAnchor","dy","opacity","renderNode","fillOpacity","maxZoom","InputWiredComponent","createEdgeMenu","wiredEdges","possibleNodes","menuList","outputsMenuList","o","m","menu","border","borderRadius","InputTextComponent","hovered","referredAdapter","selectedAdapter","onMouseEnter","onMouseLeave","val","event","currentTarget","example","InputFilePathComponent","AdapterInputsComponent","showAdapterSpecs","createNodeInput","ip","EdgeDetailComponent","sourceAdapter","targetAdapter","referredSourceAd","referredTargetAd","TabPane","Tabs","PipelineEditorComponent","createPipeline","setGraphCreated","setUploadedPipelineData","setUploadedPipelineFromDcat","currentFileList","willSubmit","handleFileChange","info","file","fileList","slice","createGraphNodes","createGraphEdges","handleSubmit","createNodes","createEdges","setTimeout","handleCancel","currAdapter","search","queryString","defaultActiveKey","overflowY","tab","PipelineGraph","rows","AdapterInputs","EdgeDetail","marginTop","Dragger","accept","multiple","App","exact","path","component","Home","Adapters","PipelineTimeline","PipelineDetail","PipelineEditor","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cc8d08c8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/dt_flow.18cbb62c.jpg\";","import {action, observable} from \"mobx\";\nimport axios from \"axios\";\nimport {ErrorStore} from \"./ErrorStore\";\n\n// FIXME: adapter comes from JSON, not db?\n// pipeline serialization should agree with above json\n// integrate front end and back end :/\nexport type AdapterType = {\n  id: string,\n  description: string,\n  inputs: { [key: string]: AdapterInputType; },\n  outputs: { [key: string]: AdapterInputType; },\n  func_type: string,\n  friendly_name: string | null,\n  example: { [key: string]: string; },\n  is_fake?: boolean\n};\n\nexport type AdapterInputType = {\n  id: string,\n  optional: boolean,\n  val: string | null,\n}\n\n// FIXME: should pass in backend url via env var\nexport const flaskUrl = \"/api\"\n\nexport class AdapterStore {\n  constructor(errorStore: ErrorStore) {\n    this.errorStore = errorStore;\n  }\n\n  errorStore: ErrorStore\n  @observable adapters: AdapterType[] = [];\n\n  @action.bound getAdapters = () => {\n    axios.get(`${flaskUrl}/adapters`).then(\n      (resp) => {\n        if (\"data\" in resp) {\n          this.adapters = resp.data;\n        } else {\n          console.log(\"THERE IS SOMETHING WRONG!\");\n        }\n      }\n    );\n  }\n}","import {action, observable} from \"mobx\";\nimport axios from \"axios\";\nimport {AdapterInputType, AdapterType, flaskUrl} from \"./AdapterStore\";\nimport {ErrorStore} from \"./ErrorStore\";\nimport {IEdge, INode,} from \"react-digraph\";\n\n// FIXME: settle down on the final format of pipeline object:\n// metadata + list of adapters?\nexport type PipelineType = {\n  name: string,\n  description: string,\n  start_timestamp: string,\n  status: string,\n  end_timestamp: string,\n  config: string,\n  id: string,\n  adapters?: AdapterType[],\n  output?: string\n};\n\nexport type UploadedPipelineDataType = {\n  nodes: NodeType[],\n  edges: EdgeType[]\n}\n\nexport type NodeType = {\n  id: number,\n  adapter: string,\n  // comment: string\n  inputs: AdapterInputType[],\n  outputs: AdapterInputType[],\n  comment?: string\n}\n\nexport type EdgeType = {\n  source: string,\n  target: string,\n  input: string,\n  output: string,\n}\n\nexport class PipelineStore {\n  constructor(errorStore: ErrorStore) {\n    this.errorStore = errorStore;\n  }\n\n  errorStore: ErrorStore\n  @observable pipelines: PipelineType[] = [];\n  @observable currentPipeline: PipelineType | null = null;\n  @observable uploadedPipelineData: UploadedPipelineDataType | null = null;\n  @observable graphCreated: boolean = false;\n  @observable selectedNode: INode | null = null;\n  @observable selectedEdge: IEdge | null = null;\n  @observable graphNodes: INode[] = [];\n  @observable graphEdges: IEdge[] = [];\n\n  @action.bound startFetch = () => {\n    this.errorStore.isLoading = true;\n    console.log(\"inside start fetch!\");\n  }\n\n  @action.bound successFetch = () => {\n    this.errorStore.isLoading = false;\n    this.errorStore.hasFailed = false;\n    console.log(\"inside success fetch!\");\n  }\n\n  @action.bound failedFetch = (errorData: Error) => {\n    console.log(\"inside failed fetch!\");\n    this.errorStore.isLoading = false;\n    this.errorStore.hasFailed = true;\n    this.errorStore.errorData = errorData;\n  }\n\n  @action.bound getPipelines = () => {\n    Promise.resolve().then(this.startFetch).then(() =>\n      axios.get(`${flaskUrl}/pipelines`)\n      .then(\n        resp => {\n          this.pipelines = resp.data;\n          this.successFetch();\n        },\n        error => {\n          this.failedFetch(error.response);\n          /* \n          if (error.response) {\n              // The request was made and the server responded with a\n              // status code that falls out of the range of 2xx\n              console.log(error.response.data);\n              console.log(error.response.status);\n              console.log(error.response.headers);\n          } else if (error.request) {\n              //  * The request was made but no response was received, `error.request`\n              //  * is an instance of XMLHttpRequest in the browser and an instance\n              //  * of http.ClientRequest in Node.js\n              console.log(error.request);\n          } else {\n              // Something happened in setting up the request and triggered an Error\n              console.log('Error', error.message);\n          }\n          console.log(error.config);\n          */\n      })\n    )\n  }\n\n  @action.bound getPipeline = (pipelineId: string) => {\n    Promise.resolve().then(this.startFetch).then(() =>\n      axios.get(`${flaskUrl}/pipelines/${pipelineId}`)\n      .then(\n        resp => {\n          this.currentPipeline = resp.data;\n          this.successFetch();\n        },\n        error => {\n          this.failedFetch(error);\n    }));\n  }\n\n  @action.bound setUploadedPipelineData = (uploadedPipelineData: UploadedPipelineDataType | null) => {\n    this.uploadedPipelineData = uploadedPipelineData;\n  }\n\n  @action.bound setUploadedPipelineFromDcat = (dcatId: string) => {\n    Promise.resolve().then(this.startFetch).then(() =>\n      axios.get(`${flaskUrl}/pipeline/dcat/${dcatId}`)\n      .then(\n        resp => {\n          this.uploadedPipelineData = resp.data.data;\n          this.graphCreated = true;\n          this.successFetch();\n        },\n        error => {\n          this.failedFetch(error);\n    }));\n  }\n\n  @action.bound setGraphCreated = (graphCreated: boolean) => {\n    this.graphCreated = graphCreated;\n  }\n\n  @action.bound createPipeline = (\n    pipelineName: string, pipelineDescription: string,\n    graphNodes: NodeType[], graphEdges: EdgeType[]\n  ) => {\n    Promise.resolve().then(this.startFetch).then(() =>\n      axios.post(`${flaskUrl}/pipeline/create`, {\n        name: pipelineName,\n        description: pipelineDescription,\n        nodes: graphNodes,\n        edges: graphEdges\n      }).then(\n        resp => {\n          this.successFetch();\n        },\n        error => {\n          this.failedFetch(error);\n    }));\n  }\n\n  @action.bound setGraphNodes = (nodes: INode[]) => {\n    this.graphNodes = nodes;\n  }\n\n  @action.bound setGraphEdges = (edges: IEdge[]) => {\n    this.graphEdges = edges;\n  }\n\n  @action.bound setSelectedNode = (node: INode | null) => {\n    this.selectedNode = node;\n    this.selectedEdge = null;\n  }\n\n  @action.bound setSelectedEdge = (edge: IEdge | null) => {\n    this.selectedEdge = edge;\n    this.selectedNode = null;\n  }\n};\n","import {action, observable} from \"mobx\";\n\n// import axios from \"axios\";\n\nexport class ErrorStore {\n  @observable isLoading: boolean = false;\n  @observable hasFailed: boolean = false;\n  @observable errorData: object = {};\n\n  @action.bound setIsLoading = (isLoading: boolean) => {\n    this.isLoading = isLoading;\n  }\n\n  @action.bound setHasFailed = (hasFailed: boolean) => {\n    this.hasFailed = hasFailed;\n  }\n\n  @action.bound setErrorData = (errorData: object) => {\n    this.errorData = errorData;\n  }\n\n}","import {createBrowserHistory} from \"history\";\nimport {RouterStore, syncHistoryWithStore} from \"mobx-react-router\";\nimport {PipelineStore} from \"./PipelineStore\";\nimport {AdapterStore} from \"./AdapterStore\";\nimport {ErrorStore} from \"./ErrorStore\";\n// import { autorun } from \"mobx\";\n\nexport const routingStore = new RouterStore();\nconst errorStore = new ErrorStore();\nexport const stores = {\n  routing: routingStore,\n  pipelineStore: new PipelineStore(errorStore),\n  adapterStore: new AdapterStore(errorStore),\n  errorStore: errorStore\n}\n// autorun(() => {\n//   console.log(\"HERE is the uploadedPipeline!\");\n//   console.log(stores.app.uploadedPipeline);\n// })\n\n\nexport type IStore = Readonly<typeof stores>;\nexport const history = syncHistoryWithStore(\n  createBrowserHistory(),\n  routingStore\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\n\nexport default class NotFound404 extends React.Component {\n  render() {\n    return (\n      <div style={{ textAlign: \"center\" }}>\n        <h1>404 Resource Not Found</h1>\n      </div>\n    );\n  }\n}\n","import * as React from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {Alert, Input, Layout, Menu, Spin} from 'antd';\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\n\nconst { Header, Content, Footer } = Layout;\nconst { Search } = Input;\n\ntype LayoutProps = {\n  children?: any,\n  isLoading?: boolean,\n  hasFailed?: boolean,\n  errorData?: object\n};\n\ntype LayoutState = {\n  selectedKey: string\n};\n\n@inject((stores: IStore) => ({\n  isLoading: stores.errorStore.isLoading,\n  hasFailed: stores.errorStore.hasFailed,\n  errorData: stores.errorStore.errorData,\n}))\n@observer\nexport default class MyLayout extends React.Component<LayoutProps> {\n  state: Readonly<LayoutState> = {\n    selectedKey: \"\"\n  }\n\n  render() {\n    const { children } = this.props;\n\n    // FIXME: onClick and highlight is not consistent\n    return (\n      <Layout className=\"layout\" style={{ height: \"100%\" }}>\n        <Header>\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          openKeys={[this.state.selectedKey ? this.state.selectedKey : \"home-page\"]}\n          style={{ lineHeight: '64px' }}\n          onClick={({ key }) => this.setState({\n            selectedKey: key\n          })}\n        >\n          <Menu.Item key=\"home\">\n            <Link to={\"/\"}>\n              MINT DT\n            </Link>\n          </Menu.Item> \n          <Menu.Item key=\"home-page\" onClick={() => this.setState({\n              selectedKey: \"home-page\"\n            })}>\n            <Link to={\"/\"} onClick={() => this.setState({\n              selectedKey: \"home-page\"\n            })}>\n              Home\n            </Link>\n          </Menu.Item> \n          <Menu.Item key=\"adapters\">\n            <Link to={\"/adapters\"}>\n              Adapters\n            </Link>\n          </Menu.Item> \n          <Menu.Item key=\"pipelines\">\n            <Link to={\"/pipelines\"}>\n              Pipeline\n            </Link>\n          </Menu.Item>\n          <Menu.Item key=\"create-pipeline\">\n            <Link to={\"/pipeline/create\"}>\n              Create Pipeline\n            </Link>\n          </Menu.Item>\n          <Menu.Item style={{ float: \"right\" }}>\n            <Search\n              placeholder=\"Search MINT DT!\"\n              onSearch={value => console.log(value)}\n            />\n          </Menu.Item>\n        </Menu>\n        </Header>\n        <Content style={{ padding: '30px 50px' }}>\n        <div style={{ background: '#fff', padding: 24, minHeight: 400, height: \"100%\", overflow: \"auto\" }}>\n          {this.props.isLoading ? <Spin size=\"large\" style={{ textAlign: \"center\" }}>\n            <Alert\n              message=\"Loading pipeline history\"\n              description=\"Right now is really slow :/\"\n              type=\"info\"\n            />\n          </Spin> : null}\n          {this.props.hasFailed ? <pre>\n            <b><u style={{ color: \"red\" }}>Oops! Some error has occurred! Refresh the page to try again!</u></b><br/><br/>\n            {JSON.stringify(this.props.errorData, null, 2)}\n          </pre> : null}\n          {!this.props.isLoading && !this.props.hasFailed ? children : null}\n         </div>\n        </Content>\n        <Footer style={{ textAlign: 'center', verticalAlign: \"bottom\" }}>MINT 2020 Created by USC ISI</Footer>\n      </Layout>\n    );\n  }\n}","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport MyLayout from \"./Layout\";\nimport dtFlow from '../images/dt_flow.jpg';\nimport {Col, Row, Typography} from 'antd';\n\nconst { Title, Paragraph, } = Typography;\n\nconst defaultProps = {};\ninterface HomeProps extends Readonly<typeof defaultProps> {\n}\ninterface HomeState {}\n\n@inject((stores: IStore) => ({\n}))\n@observer\nexport class HomeComponent extends React.Component<\n  HomeProps,\n  HomeState\n> {\n  public static defaultProps = defaultProps;\n  public state: HomeState = {};\n\n  render() {\n    return (\n      <MyLayout>\n        <Typography>\n          <Title>\n            Welcome to MINT-DT<br/>\n            <span style={{color: \"purple\", fontSize: \"0.9em\"}}><i> A framework to construct a transformation pipeline based on a given specification</i></span><br/>\n          </Title>\n          {/* FIXME: <h1>HOME</h1>\n          <h1>{this.props.a}</h1>\n          <Button type=\"danger\" onClick={this.props.app.setA}>Click Me</Button> */}\n          <Row>\n            <Col span={16}>\n              <Paragraph style={{textAlign: \"left\", fontSize: \"1.0em\"}}>\n                The idea is that we use <span style={{ color: \"blue\" }}>smaller components</span> (we refer to them as <b>adapters</b> or building blocks) which we concatenate to form a transformation flow (a \"pipeline\"). This modular design allows us to <span style={{ color: \"blue\" }}>reuse</span> existing modules and <span style={{ color: \"blue\" }}>wrap ready-scripts</span> to create a <span style={{ color: \"blue\" }}>language-and-format-independent module</span> and <span style={{ color: \"blue\" }}>pipeline</span>.<br/>\n                There are three types of components (adapters):<br/>\n                 <b><u>Reader Adapter</u></b>. Used as an entry point in the pipeline. It reads an input file (data) and a description of it (D-REPR language).<br/>\n                 <b><u>Transformation Adapter</u></b>. A class which performs a trans- formation done in a form of an API endpoint (remote or local) or an in-code script or library (i.e. using python or R). It does not materialize the data into an output, it just reproduces the data.<br/>\n                 <b><u>Writer Adapter</u></b>. Used as an exit point in the pipeline. It writes an output file based on a description file (D-REPR language).<br/>\n                Each adapter is declared using a semantic description of its attributes (i.e. inputs and outputs). The description enables input data validation and compatibility checking between the concatenated adapters and allows an easier construction of the transformation pipeline based on some simple input from the user.<br/>\n                The figure on the right depicts the general idea of our architecture that is based on building-blocks and components that can be concatenated. In the figure we show a simplified scheme of a transformation pipeline involving a reader adapter, two transformation adapters (TA) and a writer adapter.<br/>\n                <i>As an example, a <span style={{ color: \"blue\" }}>reader adapter</span> may be a CSV-file-reader that encodes the file's content to an intermediate representation. A <span style={{ color: \"purple\" }}>transformation adapter</span> may perform unit conversions on the data. Other components, such as Wrap and GraphStr2Str, are used to join and reformat the same resource without changing the actual content of the data. A <span style={{ color: \"purple\" }}>writer adapter</span> will materialize the output data to some other format, i.e. a NetCDF4 file.</i><br/>\n              </Paragraph>\n            </Col>\n            <Col span={4}>\n              <img src={dtFlow} alt=\"\"/>\n            </Col>\n          </Row>\n        </Typography>\n      </MyLayout>\n    );\n  }\n}\n\nexport default HomeComponent;\n","import React from \"react\";\nimport MyLayout from \"./Layout\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {Card} from 'antd';\nimport {AdapterType} from \"../store/AdapterStore\";\nimport _ from \"lodash\";\n\nconst defaultProps = {};\ninterface AdapterProps extends Readonly<typeof defaultProps> {\n  adapters: AdapterType[],\n  getAdapters: () => any,\n}\ninterface AdapterState {\n}\n\n@inject((stores: IStore) => ({\n  adapters: stores.adapterStore.adapters,\n  getAdapters: stores.adapterStore.getAdapters,\n}))\n@observer\nexport class AdapterComponent extends React.Component<\n  AdapterProps,\n  AdapterState\n> {\n  public static defaultProps = defaultProps;\n  public state: AdapterState = {\n  };\n\n  componentDidMount() {\n    this.props.getAdapters();\n  }\n\n\n  render() {\n    // this component renders all existing adapters\n    // TODO: similar UI between adapters and pipeline?\n    // FIXME: not exactly sure how to manage state and onChange and class props\n    const isCardLoading: boolean = this.props.adapters.length === 0;\n    return (\n      <MyLayout>\n        {this.props.adapters.map((ad, index) => \n            <Card\n              title={ad.id}\n              bordered={true}\n              loading={isCardLoading}\n              style={{ margin: \"10px 10px\" }}\n              key={`card-${index}`}\n              hoverable\n            >\n              <pre>\n                 <b><u>Function Name</u></b>: {ad.id}<br/>\n                 <b><u>Friendly Name</u></b>: {ad.friendly_name}<br/>\n                 <b><u>Function Type</u></b>: {ad.func_type}<br/>\n                 <b><u>Description</u></b>: {ad.description}<br/>\n                 <b><u>Inputs</u></b>: {_.isEmpty(ad.inputs) ? <p>None</p> :Object.keys(ad.inputs).map(\n                  (inputKey, idx) => (<pre key={`input-${idx}`}>\n                    <b><u>{inputKey}</u></b>:<br/>\n                      Type: <input value={ad.inputs[inputKey].id} readOnly/>;<br/>\n                      Optional: <input value={JSON.stringify(ad.inputs[inputKey].optional)} readOnly/>\n                  </pre>))}<br/>\n                 <b><u>Outputs</u></b>: {_.isEmpty(ad.outputs) ? <p>None</p> :Object.keys(ad.outputs).map((outputKey, idx) => (\n                  <pre key={`input-${idx}`}>\n                    <b><u>{outputKey}</u></b>:<br/>\n                      Type: <input value={ad.outputs[outputKey].id} readOnly/>;<br/>\n                      Optional: <input value={JSON.stringify(ad.outputs[outputKey].optional)} readOnly/>\n                  </pre>))}<br/>\n              </pre>\n            </Card>\n        )}\n      </MyLayout>\n  ); }\n}\n\nexport default AdapterComponent;\n","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {Link} from \"react-router-dom\";\nimport MyLayout from \"./Layout\";\nimport {Button, Col, Dropdown, Input, Menu, Popover, Row, Typography} from 'antd';\nimport {PipelineType} from \"../store/PipelineStore\";\nimport _ from \"lodash\";\n\nconst { Title } = Typography;\n\nconst { Search } = Input;\n\ninterface PipelineTimelineProps {\n  pipelines: PipelineType[],\n  getPipelines: () => any,\n}\ninterface PipelineTimelineState {}\n\n@inject((stores: IStore) => ({\n  pipelines: stores.pipelineStore.pipelines,\n  getPipelines: stores.pipelineStore.getPipelines\n}))\n@observer\nexport class PipelineTimelineComponent extends React.Component<\n  PipelineTimelineProps,\n  PipelineTimelineState\n> {\n  public state: PipelineTimelineState = {};\n\n  componentDidMount() {\n    this.props.getPipelines();\n  }\n\n  readonly timestampDropdownMenu = (\n    <Menu>\n      <Menu.Item>\n        Newest\n      </Menu.Item>\n      <Menu.Item>\n        Oldest\n      </Menu.Item>\n    </Menu>\n  );\n\n  readonly statusColorCode = {\n    running: \"orange\",\n    finished: \"green\",\n    failed: \"red\",\n  }\n\n  render() {\n    // FIXME: loading indicator, not null pipelines\n    return (\n      <MyLayout>\n        <React.Fragment>\n          <Row type=\"flex\" align=\"middle\" style={{ margin: \"20px 0\"}}>\n            <Col span={12}>\n              <Search\n                placeholder=\"input search text\"\n                onSearch={value => console.log(value)}\n                style={{ textAlign: \"left\" }}\n              />\n            </Col>\n            <Col span={8}/>\n            <Col span={2}>\n              <Dropdown\n                overlay={this.timestampDropdownMenu}\n              >\n                <Button\n                  type=\"link\" icon=\"down\"\n                  style={{ float: \"right\", color: \"black\" }}\n                >Sort</Button>\n              </Dropdown>\n            </Col>\n            <Col span={2}>\n              <Popover content=\"Create a new pipeline!\">\n                <Link to={\"/pipeline/create\"}>\n                  <Button\n                    type=\"primary\"\n                    shape=\"circle\"\n                    icon=\"plus\"\n                    // onClick={() => console.log(\"DOES NOTHING NOW!\")}\n                    style={{ float: \"right\", margin: \"0 25px\" }}\n                    size=\"large\"\n                  />\n                </Link>\n              </Popover>\n            </Col>\n          </Row>\n          {this.props.pipelines.map((pl, index) => <Row\n            key={`row-${index}`}\n            type=\"flex\" align=\"middle\"\n          >\n            <Col span={2} style={{ textAlign: \"right\" }}>\n              <Title\n                style={{\n                  color: `${_.get(this.statusColorCode, pl.status, \"black\")}`,\n                }}\n                level={4}\n              >{pl.status}</Title>\n            </Col>\n            <Col span={1}/>\n            <Col span={19}>\n              <Row style={{ margin: \"0 0\"}}>\n                <Title level={4}>\n                  <Link to={`/pipelines/${pl.id}`} style={{ color: \"black\" }}>\n                    {_.isEmpty(pl.name) ? \"Unnamed\" : pl.name}\n                  </Link>\n                </Title>\n              </Row>\n              <Row style={{ margin: \"0 0\"}}>\n                <p>{\n                  pl.end_timestamp === \"\"\n                  ? `Started at ${pl.start_timestamp}, still running`\n                  : `Started at ${pl.start_timestamp}, ended at ${pl.end_timestamp}`\n                }</p>\n              </Row>\n            </Col>\n            <Col span={2}>\n              <Button\n                type=\"danger\"\n                onClick={() => console.log(\"Doesn't do anything!\")}\n                disabled={pl.status !== \"running\"}\n                style={{ marginRight: \"10px\"}}\n              >STOP</Button>\n            </Col>\n          </Row>)}\n          { this.props.pipelines.length === 0 ?\n          <p style={{ textAlign: \"center\" }}\n          ><b>No pipeline to show :/</b></p> : null}\n        </React.Fragment>\n      </MyLayout>\n    );\n  }\n}\n\nexport default PipelineTimelineComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {PipelineType} from \"../store/PipelineStore\";\nimport {RouteComponentProps} from \"react-router\";\nimport MyLayout from \"./Layout\";\nimport {Alert, Button, Card, Col, Input, Row, Spin} from \"antd\";\nimport _ from \"lodash\";\n\nconst { TextArea } = Input;\n\n\ntype PipelineProps = {\n  currentPipeline: PipelineType,\n  getPipeline: (pipelineId: string) => any,\n}\ninterface PipelineState {\n  openConfig: boolean,\n  openOutput: boolean,\n}\n\n@inject((stores: IStore) => ({\n  currentPipeline: stores.pipelineStore.currentPipeline,\n  getPipeline: stores.pipelineStore.getPipeline\n}))\n@observer\nexport class PipelineComponent extends React.Component<\n  PipelineProps & RouteComponentProps,\n  PipelineState\n> {\n  public state: PipelineState = {\n    openConfig: false,\n    openOutput: false,\n  };\n\n  componentDidMount () {\n    // @ts-ignore\n    this.props.getPipeline(this.props.match.params.pipelineId)\n  }\n\n  render() {\n    const { currentPipeline } = this.props;\n    if (currentPipeline === null) {\n        return <MyLayout></MyLayout>;\n    }\n    return (\n      <MyLayout>\n        { _.isEmpty(this.props.currentPipeline) ?\n          <Spin size=\"large\" style={{ textAlign: \"center\" }}>\n            <Alert\n              message=\"Loading pipeline details\"\n              description=\"Right now is really slow :/\"\n              type=\"info\"\n            />\n          </Spin> :\n          <React.Fragment>\n            <Col span={12}>\n              <Card\n                title={currentPipeline.name}\n                bordered={true}\n                style={{ margin: \"5px 5px\", height: \"100%\" }}\n              >\n                <pre>\n                   <b><u>Pipeline ID</u></b>: {currentPipeline.id}<br/><br/>\n                   <b><u>Pipeline Name</u></b>: {currentPipeline.name}<br/><br/>\n                   <b><u>Description</u></b>: {currentPipeline.description}<br/><br/>\n                   <b><u>Start Timestamp</u></b>: {currentPipeline.start_timestamp}<br/><br/>\n                   <b><u>End Timestamp</u></b>: {currentPipeline.end_timestamp}<br/><br/>\n                   <b><u>Status</u></b>: {currentPipeline.status}<br/><br/>\n                   <b><u>Config</u></b>: <React.Fragment>\n                    <Button\n                      type=\"primary\" size=\"small\"\n                      onClick={() => this.setState({ openConfig: true, openOutput: false })}>\n                      Click Me To View\n                    </Button>\n                    </React.Fragment><br/><br/>\n                   <b><u>Output</u></b>: {currentPipeline.output ? <React.Fragment>\n                    <Button\n                      type=\"primary\" size=\"small\"\n                      onClick={() => this.setState({ openOutput: true, openConfig: false })}>\n                      Click Me To View\n                    </Button>\n                    </React.Fragment> : `None`}<br/><br/>\n                </pre>\n              </Card>\n            </Col>\n          <Col span={12}>\n            {this.state.openConfig ? <React.Fragment>\n                <Row>\n                <TextArea\n                  autosize\n                  title=\"Config\" wrap=\"hard\"\n                  value={JSON.stringify(currentPipeline.config, null, 2)}\n                >\n                </TextArea>\n              </Row>\n              <Row>\n                <Button\n                  style={{ margin: \"10px\", float: \"right\" }}\n                  onClick={() => this.setState({ openConfig: false })}>\n                  Cancel\n                </Button>\n              </Row>\n            </React.Fragment> : null}\n            {this.state.openOutput ? <React.Fragment>\n                <Row>\n                <TextArea\n                  autosize\n                  title=\"Output\" wrap=\"hard\"\n                  value={currentPipeline.output ? currentPipeline.output.replace(\"\\n\", \"&#10;\") : \"\"}\n                >\n                </TextArea>\n              </Row>\n              <Row>\n                <Button\n                  style={{ margin: \"10px\", float: \"right\" }}\n                  onClick={() => this.setState({ openOutput: false })}>\n                  Cancel\n                </Button>\n              </Row>\n            </React.Fragment> : null}\n          </Col>\n          </React.Fragment>\n        }\n      </MyLayout>\n    );\n  }\n}\n\nexport default PipelineComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {Button, Dropdown, Input, Menu, Modal, Row} from \"antd\";\nimport \"antd/dist/antd.css\";\nimport {AdapterType} from \"../store/AdapterStore\";\nimport {GraphView, IEdge, INode,} from \"react-digraph\";\nimport _ from \"lodash\";\nimport SubMenu from \"antd/lib/menu/SubMenu\";\n\nconst GraphConfig =  {\n  NodeTypes: {\n    empty: { // required to show empty nodes\n      typeText: \"wat\",\n      shapeId: \"#empty\", // relates to the type property of a node\n      shape: (\n        <symbol viewBox=\"0 0 50 50\" id=\"empty\" key=\"0\">\n          {/* <circle cx=\"50\" cy=\"50\" r=\"50\"></circle> */}\n          <rect x=\"0\" y=\"0\" height=\"50\" width=\"50\"/>\n        </symbol>\n      )\n    },\n  },\n  NodeSubtypes: {},\n  EdgeTypes: {\n    emptyEdge: {  // required to show empty edges\n      shapeId: \"#emptyEdge\",\n      shape: (\n        <symbol viewBox=\"0 0 50 50\" id=\"emptyEdge\" key=\"0\">\n          <circle cx=\"25\" cy=\"25\" r=\"8\" fill=\"currentColor\"> </circle>\n        </symbol>\n      )\n    }\n  }\n}\n\ninterface PipelineGraphProps {\n  selectedNode: INode | null,\n  graphNodes: INode[],\n  graphEdges: IEdge[],\n  setGraphNodes: (nodes: INode[]) => any,\n  setGraphEdges: (edges: IEdge[]) => any,\n  setSelectedNode: (node: INode | null) => any,\n  setSelectedEdge: (edge: IEdge | null) => any,\n  adapters: AdapterType[],\n  graphCreated: boolean,\n}\ninterface PipelineGraphState {\n  currentAction: string,\n  currentAdapter: string,\n  currentAdapterName: string,\n  currentToNode: string,\n  fromNodeOutput: string,\n  toNodeInput: string,\n  nameAdapter: boolean,\n}\n\n@inject((stores: IStore) => ({\n  selectedNode: stores.pipelineStore.selectedNode,\n  graphNodes: stores.pipelineStore.graphNodes,\n  graphEdges: stores.pipelineStore.graphEdges,\n  setGraphNodes: stores.pipelineStore.setGraphNodes,\n  setGraphEdges: stores.pipelineStore.setGraphEdges,\n  setSelectedNode: stores.pipelineStore.setSelectedNode,\n  setSelectedEdge: stores.pipelineStore.setSelectedEdge,\n  adapters: stores.adapterStore.adapters,\n  graphCreated: stores.pipelineStore.graphCreated,\n}))\n@observer\nexport class PipelineGraphComponent extends React.Component<\n  PipelineGraphProps,\n  PipelineGraphState\n> {\n  public state: PipelineGraphState = {\n    currentAction: \"\",\n    currentAdapter: \"\",\n    currentAdapterName: \"\",\n    currentToNode: \"\",\n    fromNodeOutput: \"\",\n    toNodeInput: \"\",\n    nameAdapter: false,\n  }\n\n  componentDidUpdate(prevProps: PipelineGraphProps) {\n    if(prevProps.graphCreated === false && this.props.graphCreated === true) {\n      this.setState({\n        currentAction: \"\",\n        currentAdapter: \"\",\n        currentAdapterName: \"\",\n        currentToNode: \"\",\n        fromNodeOutput: \"\",\n        toNodeInput: \"\",\n        nameAdapter: false,\n      })\n    }\n  }\n\n  onUpdateNode = (node: INode) => {\n    const { graphNodes, setGraphNodes, setSelectedNode } = this.props;\n    const selectedNode = graphNodes.filter(n => n.id === node.id)[0];\n    console.log(selectedNode);\n    setSelectedNode(selectedNode);\n    setGraphNodes(graphNodes.map(v => v.id === node.id ? node : v));\n  };\n  \n  createAdapterMenu = () => {\n    const currAdapters = this.props.adapters;\n    const currAdapterTypes = currAdapters.map(ad => ad.func_type).filter(\n      (v, i, a) => a.indexOf(v) === i\n    );\n    const nonTransAdapters = currAdapterTypes.filter(adt => !adt.includes(\"Transformation\"));\n    var transAdapters = currAdapterTypes.filter(adt => adt.includes(\"Transformation\"));\n    transAdapters = transAdapters.sort((a, b) => {\n      if (a.includes(\"Other\")) { return 1; }\n      if (b.includes(\"Other\")) { return -1; }\n      return a > b ? 1 : -1;\n    });\n    return (<Menu onClick={({ item }) => {\n      const currentAdapter = item.props.eventKey;\n      const { maxX, maxY, minX, minY, maxId } = this.findBoundingBoxGraphNodes();\n      const customName = `Adapter_${maxId + 1}`;\n      const newNode: INode = {\n        id: customName,\n        title: `${currentAdapter}`,\n        // type: \"empty\",\n        x: 300 + maxX,\n        y: (maxY + minY)/2,\n        // FIXME: we need a deep copy!!!!\n        // adapter: this.props.adapters.filter(ad => ad.id === currentAdapter)[0]\n        adapter: JSON.parse(JSON.stringify(this.props.adapters.filter(ad => ad.id === currentAdapter)[0]))\n      };\n      const newNodes = this.props.graphNodes;\n      newNodes.push(newNode);\n      this.props.setGraphNodes(newNodes);\n      this.props.setSelectedNode(null);\n      this.setState({\n        currentAction: \"\",\n        currentAdapter: \"\",\n        // currentAdapterName: \"\",\n        // nameAdapter: false\n      });\n      // this.setState({\n      //   currentAdapter: item.props.eventKey,\n      //   // nameAdapter: true\n      // });\n    }}>\n      {nonTransAdapters.map((adt, i) => {\n        return (<SubMenu\n            key={`adt-${i}`} title={adt}\n          >\n          {currAdapters.filter(ad => ad.func_type === adt).map((ad, idx) => {\n            return (<Menu.Item key={ad.id}>\n              {_.isEmpty(ad.friendly_name) ? ad.id : ad.friendly_name}\n            </Menu.Item>);\n          })}\n        </SubMenu>)\n      })}\n      <Menu.ItemGroup title=\"Transformers\">\n        {transAdapters.map((adt, i) => {\n          return (<SubMenu\n              key={`trans-adt-${i}`} title={adt.split(\" Transformation\")[0]}\n            >\n            {currAdapters.filter(ad => ad.func_type === adt).map((ad, idx) => {\n              return (<Menu.Item key={ad.id} disabled={ad.is_fake === true}>\n                {_.isEmpty(ad.friendly_name) ? ad.id : ad.friendly_name}\n              </Menu.Item>);\n            })}\n          </SubMenu>)\n        })}\n      </Menu.ItemGroup>\n    </Menu>);\n  };\n\n  createFromNodeOutputMenu = () => {\n    const selected = this.props.selectedNode ? this.props.selectedNode.id : \"\";\n    const selectedNode = this.props.graphNodes.filter(\n      n => n.id === selected\n    )[0].adapter;\n    return (<Menu onClick={({ item }) => {\n      this.setState({ fromNodeOutput: item.props.children });\n      }}>\n      {Object.keys(selectedNode.outputs).map((k, idx) => {\n        return (<Menu.Item key={`output-${idx}`}>\n          {k}\n        </Menu.Item>);\n      })}\n    </Menu>);\n  };\n\n  createToNodeMenu = () => {\n    const selected = this.props.selectedNode ? this.props.selectedNode.id : \"\";\n    return (<Menu onClick={({ item }) => {\n      this.setState({ currentToNode: item.props.children });\n      }}>\n      {this.props.graphNodes.filter(\n        n => n.id !== selected\n      ).map((node, idx) => {\n        return (<Menu.Item key={`${idx}`}>\n          {node.id}\n        </Menu.Item>);\n      })}\n    </Menu>);\n  };\n\n  createToNodeInputMenu = () => {\n    const selectedNode = this.props.graphNodes.filter(n => n.id === this.state.currentToNode)[0].adapter;\n    return (<Menu onClick={({ item }) => {\n      this.setState({ toNodeInput: item.props.children });\n      }}>\n      {Object.keys(selectedNode.inputs).map((k, idx) => {\n        return (<Menu.Item key={`input-${idx}`}>\n          {k}\n        </Menu.Item>);\n      })}\n    </Menu>);\n  };\n\n  createNodeEdgeMenu = () => {\n    const selected = this.props.selectedNode ? this.props.selectedNode.id : \"\";\n    const nodeEdges = this.props.graphEdges.filter(\n      e => e.source === selected || e.target === selected\n    );\n    return (<Menu onClick={({ key }) => {\n        const updates = key.split(\"-\");\n        // const selectedNode = this.props.adapters.filter(a => a.id === updates[0])[0];\n        // this.props.setSelectedNode(selectedNode);\n        this.setState({\n          fromNodeOutput: updates[1],\n          currentToNode: updates[2],\n          toNodeInput: updates[3]\n        });\n      }}>\n      {\n      nodeEdges.map((e, idx) => {\n        return (<Menu.Item key={`${e.source}-${e.output}-${e.target}-${e.input}`}>\n          {`${e.source}.${e.output} => ${e.target}.${e.input}`}\n        </Menu.Item>);\n      })}\n    </Menu>);\n  };\n\n  isAlphaNumericUnderscore = (check: string) => {\n    if (check.length === 0) { return true; }\n    const subStrings = check.split(\"_\");\n    for (var i = 0; i < subStrings.length; i++){\n      if (subStrings[i].match(/^[0-9a-zA-Z]+$/g) === null) { return false; }\n    }\n    return true;\n  }\n\n  findBoundingBoxGraphNodes = () => {\n    const { graphNodes } = this.props;\n    var maxX = Number.NEGATIVE_INFINITY, maxY = Number.NEGATIVE_INFINITY;\n    var minX = Number.POSITIVE_INFINITY, minY = Number.POSITIVE_INFINITY;\n    var maxId = -1;\n    for (var i = 0; i < graphNodes.length; i++) {\n      const nodeX = Number(graphNodes[i].x);\n      const nodeY = Number(graphNodes[i].y);\n      if (i > maxId) {\n        maxId = i;\n      }\n      if (nodeX > maxX) {\n        maxX = nodeX;\n      }\n      if (nodeX < minX) {\n        minX = nodeX;\n      }\n      if (nodeY > maxY) {\n        maxY = nodeY;\n      }\n      if (nodeY < minY) {\n        minY = nodeY;\n      }\n    }\n    if (maxId < 0) {\n      maxX = 300;\n      maxY = 300;\n      minX = 300;\n      minY = 300;\n    }\n    return { maxX, maxY, minX, minY, maxId }\n  }\n\n  onClear = () => {\n    this.props.setSelectedNode(null);\n    this.setState({\n      currentAction: \"\",\n      currentAdapter: \"\",\n      currentToNode: \"\",\n      toNodeInput: \"\",\n      fromNodeOutput: \"\",\n      currentAdapterName: \"\"\n    });\n  }\n\n  onSelectEdge = (selectedEdge: IEdge) => {\n    // const { target, source, input, output } = selectedEdge;\n    this.props.setSelectedNode(null);\n    this.props.setSelectedEdge(selectedEdge);\n  }\n\n  render() {\n    const { graphNodes, graphEdges, selectedNode } = this.props;\n    // FIXME: forced rerendering?\n    console.log(`Number of edges is: ${graphEdges.length}`);\n    const selected = selectedNode ? selectedNode.id : \"\";\n    return (\n      <React.Fragment>\n        <Row style={{ margin: \"20px 10px\"}}>\n          { _.isEmpty(selected) && _.isEmpty(this.state.currentAction) ?\n            <p>\n              <Button\n                style={{ margin: \"5px\" }}\n                onClick={() => this.setState({ currentAction: \"add-a-new-node\"})}\n              >Add A New Adapter</Button>\n            </p>\n            : null\n          }\n          { selected && _.isEmpty(this.state.currentAction) ? <span>\n            <p>{`Select an action on ${selected}: `}</p>\n            {/* <Button\n              style={{ margin: \"5px\" }}\n              onClick={() => this.setState({ currentAction: \"add-a-new-node\"})}\n            >Add A New Adapter</Button> */}\n            {/* <Button\n              style={{ margin: \"5px\" }}\n              onClick={() => this.setState({ currentAction: \"add-a-new-edge\"})}\n            >Add A New Edge</Button> */}\n            <Button\n              style={{ margin: \"5px\" }}\n              onClick={() => this.setState({ currentAction: \"delete-this-node\"})}\n            >Delete This Node</Button>\n            {/* <Button\n              style={{ margin: \"5px\" }}\n              onClick={() => this.setState({ currentAction: \"delete-its-edge\"})}\n            >Delete Its Edge</Button> */}\n            <Button\n              style={{ margin: \"5px\" }}\n              onClick={() => this.props.setSelectedNode(null)}\n              type=\"dashed\"\n            >Cancel</Button>\n          </span> : null}\n          { this.state.currentAction === \"add-a-new-node\"\n            ? <span>\n              <p>Add A New Adapter: </p>\n              <Dropdown overlay={this.createAdapterMenu()}>\n                { this.state.currentAdapter\n                ? <b>{`Selected Adapter: ${this.state.currentAdapter}`}</b>\n                : <Button><b>Select An Adapter</b></Button>}\n              </Dropdown>\n              {/* FIXME: no more naming adapters*/}\n              <Modal\n                title=\"Naming new adapter...\"\n                visible={this.state.nameAdapter}\n                onOk={() => {\n                  console.log(\"adding a new node to the graph\");\n                  const { maxX, maxY, minX, minY, maxId } = this.findBoundingBoxGraphNodes();\n                  const customName = this.state.currentAdapterName ? this.state.currentAdapterName : `Adapter_${maxId + 1}`;\n                  const newNode: INode = {\n                    id: customName,\n                    title: `${this.state.currentAdapter}`,\n                    // type: \"empty\",\n                    x: 300 + (maxX + minX)/2,\n                    y: (maxY + minY)/2,\n                    adapter: this.props.adapters.filter(ad => ad.id === this.state.currentAdapter)[0]\n                  };\n                  const newNodes = graphNodes;\n                  newNodes.push(newNode);\n                  this.props.setGraphNodes(newNodes);\n                  this.props.setSelectedNode(null);\n                  this.setState({\n                    currentAction: \"\",\n                    currentAdapter: \"\",\n                    currentAdapterName: \"\",\n                    nameAdapter: false\n                  });\n                }}\n                okButtonProps={{ disabled: !this.isAlphaNumericUnderscore(this.state.currentAdapterName) }}\n                onCancel={() => this.setState({\n                  currentAction: \"\",\n                  currentAdapter: \"\",\n                  currentAdapterName: \"\",\n                  nameAdapter: false\n                })}\n              >\n                <p>\n                  Enter adapter name (Please only use \"_\" as delimiter):\n                  <Input\n                    value={this.state.currentAdapterName}\n                    onChange={({ target }) => this.setState({ currentAdapterName: target.value })}\n                  /> \n                  <span style={{ color: \"gray\" }}>{`* Default name to Adapter_#`}</span>\n                </p>\n              </Modal>\n            </span> : null\n          }\n          { this.state.currentAction === \"add-a-new-edge\"\n            ? <span>\n              <p>\n                {`Add A New Edge From ${selected} `}\n                <Dropdown overlay={this.createFromNodeOutputMenu()}>\n                  { this.state.fromNodeOutput\n                  ? <b>{ `${this.state.fromNodeOutput}`}</b>\n                  : <Button><b>Select Node Output</b></Button>}\n                </Dropdown>\n                {` To `}\n                <Dropdown overlay={this.createToNodeMenu()}>\n                  { this.state.currentToNode\n                  ? <b>{` ${this.state.currentToNode}` }</b>\n                  : <Button><b>Select Node Output</b></Button>}\n                </Dropdown>\n                {`   `}\n                { _.isEmpty(this.state.currentToNode) ? null : <Dropdown overlay={this.createToNodeInputMenu()}>\n                  { this.state.toNodeInput\n                  ? <b>{ `${this.state.toNodeInput}`}</b>\n                  : <Button><b>Select Node Input</b></Button>}\n                </Dropdown>}\n                <Button\n                  style={{ float: \"right\", margin: \"5px\" }}\n                  disabled={_.isEmpty(this.state.toNodeInput)}\n                  onClick={() => {\n                    console.log(\"adding a new edge to the graph\");\n                    // FIXME: should we update node fields as well?\n                    const newEdges = this.props.graphEdges;\n                    newEdges.push({\n                      target: this.state.currentToNode,\n                      source: selected || \"\",\n                      type: \"empty\",\n                      input: this.state.toNodeInput,\n                      output: this.state.fromNodeOutput\n                    });\n                    this.props.setGraphEdges(newEdges);\n                    this.props.setSelectedNode(null);\n                    this.setState({\n                      currentAction: \"\",\n                      currentAdapter: \"\",\n                      currentToNode: \"\",\n                      toNodeInput: \"\",\n                      fromNodeOutput: \"\"\n                    });\n                  }}\n                  type=\"primary\"\n                >OK</Button>\n                <Button\n                  style={{ float: \"right\", margin: \"5px\" }}\n                  onClick={this.onClear}\n                >Clear</Button>\n              </p>\n            </span> : null\n          }\n          { this.state.currentAction === \"delete-this-node\"\n            ? <span>\n              <p>Are you sure you want to delete this node? All inputs/edges of this node will be lost.</p>\n              <Button\n                style={{ float: \"right\", margin: \"5px\" }}\n                type=\"danger\"\n                onClick={() => {\n                  console.log(\"deleting this node in the graph\");\n                  const selected = this.props.selectedNode ? this.props.selectedNode.id : \"\";;\n                  const newNodes = this.props.graphNodes.filter(n => n.id !== selected);\n                  const newEdges = this.props.graphEdges.filter(e => e.target !== selected && e.source !== selected );\n                  this.props.setGraphNodes(newNodes);\n                  this.props.setGraphEdges(newEdges);\n                  this.props.setSelectedNode(null);\n                  this.setState({\n                    currentAction: \"\",\n                    currentAdapter: \"\"\n                  })\n                }}\n              >Yes</Button>\n              <Button\n                style={{ float: \"right\", margin: \"5px\" }}\n                onClick={this.onClear}\n                type=\"primary\"\n              >No</Button>\n            </span> : null\n          }\n          { this.state.currentAction === \"delete-its-edge\"\n            ? <span>\n              <p>{`Select An Edge From ${selected}:`} </p>\n              <Dropdown overlay={this.createNodeEdgeMenu()}>\n                { this.state.currentToNode\n                ? <b>{\n                  `Deleting The Edge From ${selected}.${this.state.fromNodeOutput}\n                    To ${this.state.currentToNode}.${this.state.toNodeInput}`}</b>\n                : <Button><b>Select Node Edges</b></Button>}\n              </Dropdown>\n              <Button\n                style={{ float: \"right\", margin: \"5px\" }}\n                type=\"danger\"\n                onClick={() => {\n                  console.log(\"deleting this node in the graph\");\n                  const selected = this.props.selectedNode ? this.props.selectedNode.id : \"\";\n                  const { graphEdges, setGraphEdges, setSelectedNode } = this.props;\n                  const { currentToNode, fromNodeOutput, toNodeInput } = this.state;\n                  // FIXME: should we update graphNodes as well?\n                  const newEdges = graphEdges.filter(\n                    e => e.target !== currentToNode || e.source !== selected\n                    || e.input !== toNodeInput || e.output !== fromNodeOutput\n                  );\n                  setGraphEdges(newEdges);\n                  setSelectedNode(null);\n                  this.setState({\n                    currentAction: \"\",\n                    currentAdapter: \"\",\n                    currentToNode: \"\"\n                  })\n                }}\n                disabled={this.state.currentToNode === \"\"}\n              >Yes</Button>\n              <Button\n                style={{ float: \"right\", margin: \"5px\" }}\n                onClick={this.onClear}\n                type=\"primary\"\n              >No</Button>\n            </span> : null\n          }   \n        </Row>\n        <Row style={{ margin: \"20px 10px\", height: \"100%\" }}>\n          <GraphView\n            ref='GraphView'\n            nodeKey=\"id\"\n            nodes={graphNodes}\n            edges={graphEdges}\n            selected={{}}\n            nodeTypes={GraphConfig.NodeTypes}\n            nodeSubtypes={GraphConfig.NodeSubtypes}\n            edgeTypes={GraphConfig.EdgeTypes}\n            onUpdateNode={this.onUpdateNode}\n            onSelectNode={() => console.log(\"does nothing\")}\n            onCreateNode={() => console.log(\"does nothing\")}\n            onDeleteNode={() => console.log(\"does nothing\")}\n            // onSelectEdge={() => console.log(\"does nothing\")}\n            onSelectEdge={this.onSelectEdge}\n            onCreateEdge={() => console.log(\"does nothing\")}\n            onSwapEdge={() => console.log(\"does nothing\")}\n            onDeleteEdge={() => console.log(\"does nothing\")}\n            renderNodeText={(data: any, id: string | number, isSelected: boolean) => {\n              const { title } = data;\n              const lineOffset = 18;\n              if (typeof id !== \"string\") {\n                return;\n              }\n              const customName = id.split(\"-\")[1];\n              return (\n                <text textAnchor=\"middle\" x={0} y={0} fontSize=\"smaller\">\n                  {!!title && <tspan x={0} dy={-lineOffset} opacity=\"1\">{title}</tspan>}\n                  {!!customName && <tspan x={0} dy={2 * lineOffset} opacity=\"1\">{customName}</tspan>}\n                </text>\n              );\n            }}\n            renderNode={() => {\n              return (\n                <g className=\"shape\" height={100} width={100}>\n                  <rect\n                    x={-50}\n                    y={-50}\n                    width={100}\n                    height={100}\n                    fill=\"#D9EE87\"\n                    fillOpacity=\"1\"\n                  />\n                </g>\n              );\n            }}\n            maxZoom={1}\n          />\n        </Row>\n      </React.Fragment>);\n  }\n}\nexport default PipelineGraphComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {Dropdown, Input, Menu} from \"antd\";\nimport {IEdge, INode,} from \"react-digraph\";\nimport _ from \"lodash\";\n\ninterface InputWiredProps {\n  selectedNode: INode | null,\n  graphNodes: INode[],\n  graphEdges: IEdge[],\n  setGraphEdges: (edges: IEdge[]) => any,\n  setSelectedNode: (node: INode | null) => any,\n  input: string,\n  wiredEdges: IEdge[],\n}\n\ninterface InputWiredState {}\n\n@inject((stores: IStore) => ({\n  selectedNode: stores.pipelineStore.selectedNode,\n  graphNodes: stores.pipelineStore.graphNodes,\n  graphEdges: stores.pipelineStore.graphEdges,\n  setGraphEdges: stores.pipelineStore.setGraphEdges,\n  setSelectedNode: stores.pipelineStore.setSelectedNode,\n}))\n@observer\nexport class InputWiredComponent extends React.Component<\n  InputWiredProps,\n  InputWiredState\n> {\n  createEdgeMenu = () => {\n    const { graphNodes, graphEdges, selectedNode, setGraphEdges, input, wiredEdges } = this.props;\n    const possibleNodes = graphNodes.filter(n => n.id !== selectedNode!.id);\n    var menuList = [];\n    for (let i = 0; i < possibleNodes.length; i ++) {\n      let outputs = possibleNodes[i].adapter.outputs;\n      let outputsMenuList = Object.keys(outputs).map(o => ({\n        node: possibleNodes[i].id,\n        output: o\n      }))\n      menuList.push(...outputsMenuList);\n    }\n    return <Menu onClick={({ item }) => {\n      const { eventKey } = item.props;\n      const data = eventKey.split(\"-\");\n      var newEdges = graphEdges\n      if (data[1] === \"null\" && data[2] === \"null\") {\n        newEdges = newEdges.filter(e => !(e.target === selectedNode!.id && e.input === input))\n      } else {\n        if (wiredEdges.length > 0) {\n          // remove old wiring\n          newEdges = newEdges.filter(e => !wiredEdges.includes(e))\n        }\n        newEdges.push({\n          target: selectedNode!.id,\n          source: data[1],\n          input: input,\n          output: data[2]\n        });\n      }\n      setGraphEdges(newEdges);\n      }}>\n      <Menu.Item key={`menu-null-null-0`}>\n        {`None`}\n      </Menu.Item>\n      {menuList.map((m, idx) => {\n        return (\n          <Menu.Item key={`menu-${m.node}-${m.output}-${idx}`}>\n            {`Node ${m.node} - output name: ${m.output}`}\n          </Menu.Item>\n        );\n      })}      \n    </Menu>\n  }\n\n  render() {\n    const { wiredEdges } = this.props;\n    const menu = this.createEdgeMenu(); \n    return (\n      <Dropdown overlay={menu}>\n        <Input\n          disabled={true}\n          type=\"text\"\n          value={\n            _.isEmpty(wiredEdges) ? \"Select from possible outputs...\"\n            : `${wiredEdges[0].source}.${wiredEdges[0].output}`\n          }\n          style={{\n            padding:\"5px\",\n            border:\"2px solid\",\n            borderRadius: \"5px\",\n            width: \"100%\"\n          }}\n        />\n      </Dropdown>\n    );\n  }\n}\n\nexport default InputWiredComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {INode} from \"react-digraph\";\nimport {AdapterType} from \"../store/AdapterStore\";\n\ninterface InputTextProps {\n  selectedNode: INode | null,\n  graphNodes: INode[],\n  setGraphNodes: (nodes: INode[]) => any,\n  input: string,\n  referredAdapter: AdapterType\n}\n\ninterface InputTextState {\n  hovered: boolean\n}\n\n@inject((stores: IStore) => ({\n  selectedNode: stores.pipelineStore.selectedNode,\n  graphNodes: stores.pipelineStore.graphNodes,\n  setGraphNodes: stores.pipelineStore.setGraphNodes,\n}))\n@observer\nexport class InputTextComponent extends React.Component<\n  InputTextProps,\n  InputTextState\n> {\n  state: InputTextState = {\n    hovered: false\n  }\n\n  render() {\n    const { selectedNode, input, graphNodes, setGraphNodes, referredAdapter } = this.props;\n    if (selectedNode === null) { return; }\n    console.log(\"Look at me! \")\n    console.log(selectedNode.id)\n    const selectedAdapter = selectedNode!.adapter;\n    return (\n      <p\n        onMouseEnter={() => this.setState({ hovered: true })}\n        onMouseLeave={() => this.setState({ hovered: false })}\n      >\n      <textarea\n        name={input}\n        value={selectedAdapter.inputs[input].val || \"\"}\n        onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) => {\n          const { currentTarget } = event;\n          var newNodes = graphNodes;\n          var newNode = newNodes.filter(n => n.id === selectedNode.id)[0];\n          newNode.adapter.inputs[currentTarget.name].val = currentTarget.value;\n          // this.setState({ graphNodes: newNodes });\n          setGraphNodes(newNodes);\n        }}\n        wrap=\"soft\"\n        style={{\n          padding:\"5px\",\n          border:\"2px solid\",\n          borderRadius: \"5px\",\n          width: \"100%\"\n        }}\n      />\n      {this.state.hovered ? <span style={{ color: \"red\" }}>\n        {`Hint: Please enter a valid string, for instance: \"${referredAdapter.example[input]}\"`}\n      </span> : null}\n      </p>\n    );\n  }\n}\n\nexport default InputTextComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {INode} from \"react-digraph\";\nimport {AdapterType} from \"../store/AdapterStore\";\n\ninterface InputFilePathProps {\n  selectedNode: INode | null,\n  graphNodes: INode[],\n  setGraphNodes: (nodes: INode[]) => any,\n  input: string,\n  referredAdapter: AdapterType\n}\n\ninterface InputFilePathState {\n  hovered: boolean\n}\n\n@inject((stores: IStore) => ({\n  selectedNode: stores.pipelineStore.selectedNode,\n  graphNodes: stores.pipelineStore.graphNodes,\n  setGraphNodes: stores.pipelineStore.setGraphNodes,\n}))\n@observer\nexport class InputFilePathComponent extends React.Component<\n  InputFilePathProps,\n  InputFilePathState\n> {\n  state: InputFilePathState = {\n    hovered: false\n  }\n\n  render() {\n    const { selectedNode, input, graphNodes, setGraphNodes, referredAdapter } = this.props;\n    if (selectedNode === null) { return; }\n    const selectedAdapter = selectedNode!.adapter;\n    return (\n      <p\n        onMouseEnter={() => this.setState({ hovered: true })}\n        onMouseLeave={() => this.setState({ hovered: false })}\n      >\n        <input\n          name={input}\n          value={selectedAdapter.inputs[input].val || \"\"}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\n            const { currentTarget } = event;\n            var newNodes = graphNodes;\n            var newNode = newNodes.filter(n => n.id === selectedNode.id)[0];\n            newNode.adapter.inputs[currentTarget.name].val = currentTarget.value;\n            // this.setState({ graphNodes: newNodes });\n            setGraphNodes(newNodes);\n          }}\n          style={{\n            padding:\"5px\",\n            border:\"2px solid\",\n            borderRadius: \"5px\",\n            width: \"100%\"\n          }}\n        />\n        { this.state.hovered ? <span style={{ color: \"red\" }}>\n          {`Hint: Please enter a valid file path, for instance: \"${referredAdapter.example[input]}\"`}\n        </span> : null}\n      </p>\n    );\n  }\n}\n\nexport default InputFilePathComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {Button, Modal} from \"antd\";\nimport \"antd/dist/antd.css\";\nimport {AdapterType} from \"../store/AdapterStore\";\nimport {IEdge, INode,} from \"react-digraph\";\nimport _ from \"lodash\";\nimport InputWiredComponent from \"./InputComponentWired\";\nimport InputTextComponent from \"./InputComponentText\";\nimport InputFilePathComponent from \"./InputComponentFilePath\";\n\ninterface AdapterInputsProps {\n  selectedNode: INode | null,\n  graphNodes: INode[],\n  graphEdges: IEdge[],\n  setGraphNodes: (nodes: INode[]) => any,\n  setGraphEdges: (edges: IEdge[]) => any,\n  setSelectedNode: (node: INode | null) => any,\n  adapters: AdapterType[],\n  graphCreated: boolean,\n}\n\ninterface AdapterInputsState {\n  showAdapterSpecs: boolean,\n}\n\n@inject((stores: IStore) => ({\n  selectedNode: stores.pipelineStore.selectedNode,\n  graphNodes: stores.pipelineStore.graphNodes,\n  graphEdges: stores.pipelineStore.graphEdges,\n  setGraphNodes: stores.pipelineStore.setGraphNodes,\n  setGraphEdges: stores.pipelineStore.setGraphEdges,\n  setSelectedNode: stores.pipelineStore.setSelectedNode,\n  adapters: stores.adapterStore.adapters,\n  graphCreated: stores.pipelineStore.graphCreated,\n}))\n@observer\nexport class AdapterInputsComponent extends React.Component<\n  AdapterInputsProps,\n  AdapterInputsState\n> {\n  public state: AdapterInputsState = {\n    showAdapterSpecs: false,\n  }\n\n  componentDidUpdate(prevProps: AdapterInputsProps) {\n    if(prevProps.graphCreated === false && this.props.graphCreated === true) {\n      this.setState({\n        showAdapterSpecs: false\n      })\n    }\n  }\n\n  createNodeInput = (referredAdapter: AdapterType, selectedNode: INode, ip: string, idx: number, optional: boolean) => {\n    const { graphEdges } = this.props;\n    const selectedAdapter = selectedNode.adapter;\n    if (selectedAdapter.inputs[ip].id === \"dataset\") {\n      const wiredEdges = graphEdges.filter(e => e.target === selectedNode.id && e.input === ip);\n      // this should be a dropdown to select from\n      return <div key={`input-${idx}`} style={{ margin: \"20px 20px\"}}>\n        {`${ip}: `}\n        {!optional ? <span style={{ color: \"red\" }}>{`*`}</span> : null}\n        <InputWiredComponent\n          selectedNode={selectedNode}\n          graphNodes={this.props.graphNodes}\n          graphEdges={this.props.graphEdges}\n          setGraphEdges={this.props.setGraphEdges}\n          setSelectedNode={this.props.setSelectedNode}\n          input={ip}\n          wiredEdges={wiredEdges}\n        />\n      </div>\n    } else if (selectedAdapter.inputs[ip].id === \"file_path\") {\n      return (\n        <div key={`input-${idx}`} style={{ margin: \"20px 20px\"}}>\n          {`${ip}: `}\n          {!optional ? <span style={{ color: \"red\" }}>{`*`}</span> : null}\n          <InputFilePathComponent\n            selectedNode={selectedNode}\n            graphNodes={this.props.graphNodes}\n            setGraphNodes={this.props.setGraphNodes}\n            input={ip}\n            referredAdapter={referredAdapter}\n          />\n        </div>\n      );\n    }\n    else {\n      return (\n        <div key={`input-${idx}`} style={{ margin: \"20px 20px\"}}>\n          {`${ip}: `}\n          {!optional ? <span style={{ color: \"red\" }}>{`*`}</span> : null}\n          <InputTextComponent\n            selectedNode={selectedNode}\n            graphNodes={this.props.graphNodes}\n            setGraphNodes={this.props.setGraphNodes}\n            input={ip}\n            referredAdapter={referredAdapter}\n          />\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const { selectedNode, graphEdges, adapters } = this.props;\n    const selectedAdapter = selectedNode ? selectedNode.adapter : null;\n    if (selectedAdapter === null) {\n      return null;\n    }\n    const referredAdapter = adapters.filter(a => a.id === selectedAdapter.id)[0];\n    return ( selectedNode === null ? null : <React.Fragment>\n      <p style={{ margin: \"20px 20px\"}}>\n         <b><u>Function Friendly Name</u></b>: {referredAdapter.friendly_name}<br/>\n         <b><u>Function Type</u></b>: {referredAdapter.func_type}<br/>\n         <b><u>Description</u></b>: {referredAdapter.description}<br/>\n      </p>\n      <p style={{ margin: \"20px 20px\"}}>\n        <b>Inputs to adapter: </b>\n        <Button onClick={() => this.setState({ showAdapterSpecs: true })}>\n          See Input Specs\n        </Button>\n        <Modal\n          title=\"Adpater Inputs Detail\"\n          visible={this.state.showAdapterSpecs}\n          onOk={() => this.setState({ showAdapterSpecs: false })}\n          onCancel={() => this.setState({ showAdapterSpecs: false })}\n        >\n          <pre>\n            {/*  <b><u>Inputs</u></b>:  */}\n            {_.isEmpty(referredAdapter.inputs) ? <p>None</p> :Object.keys(referredAdapter.inputs).map(\n              (inputKey, idx) => (<pre key={`input-${idx}`}>\n                <b><u>{inputKey}</u></b>:<br/>\n                  Type: <input value={referredAdapter.inputs[inputKey].id} readOnly/>;<br/>\n                  Optional: <input value={JSON.stringify(referredAdapter.inputs[inputKey].optional)} readOnly/>\n              </pre>))}<br/>\n            {/*  <b><u>Outputs</u></b>: {_.isEmpty(selectedNode.outputs) ? <p>None</p> :Object.keys(selectedNode.outputs).map((outputKey, idx) => (\n              <pre key={`input-${idx}`}>\n                <b><u>{outputKey}</u></b>:<br/>\n                  Type: <input value={selectedNode.outputs[outputKey].id} readOnly/>;<br/>\n                  Optional: <input value={JSON.stringify(selectedNode.outputs[outputKey].optional)} readOnly/>\n              </pre>))}<br/> */}\n          </pre>                     \n        </Modal>\n      </p>\n      <form>\n        {Object.keys(referredAdapter.inputs).filter(\n          ip => !referredAdapter.inputs[ip].optional\n        ).map((ip, idx) => {\n          return this.createNodeInput(referredAdapter, selectedNode, ip, idx, false)\n        })}\n        {Object.keys(referredAdapter.inputs).filter(\n          ip => referredAdapter.inputs[ip].optional\n        ).map((ip, idx) => {\n          return this.createNodeInput(referredAdapter, selectedNode, ip, idx, true)\n        })}\n      </form>\n      <p style={{ margin: \"20px 20px\"}}><b>Wiring of this adapter:</b></p>\n      {graphEdges.filter(e => e.source === selectedNode.id || e.target === selectedNode.id)\n      .map((e, idx) => {\n        return (<p style={{ margin: \"20px 20px\"}} key={`edge-${idx}`}>\n           {`${e.source}`}.{e.output} <b>=></b> {`${e.target}`}.{e.input}\n        </p>);\n      })}\n    </React.Fragment>);\n  }\n}\n\nexport default AdapterInputsComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\n// import { Button, Modal } from \"antd\";\nimport {IEdge, INode,} from \"react-digraph\";\nimport {AdapterType} from \"../store/AdapterStore\";\n\ninterface EdgeDetailProps {\n  selectedEdge: IEdge,\n  graphNodes: INode[],\n  adapters: AdapterType[]\n}\n\ninterface EdgeDetailState {\n  showAdapterSpecs: boolean,\n}\n\n@inject((stores: IStore) => ({\n  selectedEdge: stores.pipelineStore.selectedEdge,\n  graphNodes: stores.pipelineStore.graphNodes,\n  adapters: stores.adapterStore.adapters\n}))\n@observer\nexport class EdgeDetailComponent extends React.Component<\n  EdgeDetailProps,\n  EdgeDetailState\n> {\n  render() {\n    const { selectedEdge, graphNodes, adapters } = this.props;\n    if (selectedEdge === null) {\n      return null;\n    }\n    const { source, target, input, output } = selectedEdge;\n    const sourceAdapter = graphNodes.filter(n => n.id === source)[0].adapter;\n    const targetAdapter = graphNodes.filter(n => n.id === target)[0].adapter;\n    const referredSourceAd = adapters.filter(ad => ad.id === sourceAdapter.id)[0];\n    const referredTargetAd = adapters.filter(ad => ad.id === targetAdapter.id)[0];\n\n    return (<React.Fragment>\n      <p style={{ margin: \"20px 20px\", fontSize: \"1em\" }}>\n         <b><u>From Adapter</u></b>: {referredSourceAd.friendly_name ? referredSourceAd.friendly_name : referredSourceAd.id}<br/><br/><br/>\n         <b><u>Output</u></b>: {output}<br/><br/><br/>\n         <b><u>To Adapter</u></b>:{referredTargetAd.friendly_name ? referredTargetAd.friendly_name : referredTargetAd.id}<br/><br/><br/>\n         <b><u>Input</u></b>: {input}<br/>\n      </p>\n    </React.Fragment>);\n  }\n}\n\nexport default EdgeDetailComponent;","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {IStore} from \"../store\";\nimport {Button, Col, Icon, Input, message, Modal, Row, Tabs, Upload} from \"antd\";\nimport MyLayout from \"./Layout\";\nimport {EdgeType, NodeType, UploadedPipelineDataType} from \"../store/PipelineStore\"\nimport \"antd/dist/antd.css\";\nimport {UploadChangeParam, UploadFile} from \"antd/lib/upload/interface\";\nimport {RouterProps} from \"react-router\";\nimport {AdapterType, flaskUrl} from \"../store/AdapterStore\";\nimport queryString from 'query-string';\nimport {IEdge, INode,} from \"react-digraph\";\nimport PipelineGraph from \"./PipelineGraph\";\nimport AdapterInputs from \"./AdapterInputs\";\nimport EdgeDetail from \"./EdgeDetail\";\n\nconst { TextArea } = Input;\nconst { TabPane } = Tabs;\n\ninterface PipelineEditorProps extends RouterProps {\n  uploadedPipelineData: UploadedPipelineDataType | null,\n  graphCreated: boolean,\n  setUploadedPipelineData: (uploadedPipeline: UploadedPipelineDataType | null) => any,\n  setGraphCreated: (graphCreated: boolean) => any,\n  setUploadedPipelineFromDcat: (dcatId: string) => any,\n  location: Location,\n  createPipeline: (pipelineName: string, pipelineDescription: string, graphNodes: NodeType[], graphEdges: EdgeType[]) => any,\n  adapters: AdapterType[],\n  getAdapters: () => any,\n  selectedNode: INode | null,\n  selectedEdge: IEdge | null,\n  graphNodes: INode[],\n  graphEdges: IEdge[],\n  setGraphNodes: (nodes: INode[]) => any,\n  setGraphEdges: (edges: IEdge[]) => any,\n  setSelectedNode: (node: INode | null) => any,\n  setSelectedEdge: (edge: IEdge | null) => any,\n}\ninterface PipelineEditorState {\n  currentFileList: UploadFile[],\n  pipelineName: string,\n  pipelineDescription: string,\n  willSubmit: boolean,\n}\n\n@inject((stores: IStore) => ({\n  uploadedPipelineData: stores.pipelineStore.uploadedPipelineData,\n  graphCreated: stores.pipelineStore.graphCreated,\n  location: stores.routing.location,\n  createPipeline: stores.pipelineStore.createPipeline,\n  setGraphCreated: stores.pipelineStore.setGraphCreated,\n  setUploadedPipelineData: stores.pipelineStore.setUploadedPipelineData,\n  setUploadedPipelineFromDcat: stores.pipelineStore.setUploadedPipelineFromDcat,\n  adapters: stores.adapterStore.adapters,\n  getAdapters: stores.adapterStore.getAdapters,\n  selectedNode: stores.pipelineStore.selectedNode,\n  selectedEdge: stores.pipelineStore.selectedEdge,\n  graphNodes: stores.pipelineStore.graphNodes,\n  graphEdges: stores.pipelineStore.graphEdges,\n  setGraphNodes: stores.pipelineStore.setGraphNodes,\n  setGraphEdges: stores.pipelineStore.setGraphEdges,\n  setSelectedNode: stores.pipelineStore.setSelectedNode,\n  setSelectedEdge: stores.pipelineStore.setSelectedEdge,\n}))\n@observer\nexport class PipelineEditorComponent extends React.Component<\n  PipelineEditorProps,\n  PipelineEditorState\n> {\n  public state: PipelineEditorState = {\n    currentFileList: [],\n    pipelineName: \"\",\n    pipelineDescription: \"\",\n    willSubmit: false,\n  };\n\n  componentDidMount() {\n    if (this.props.location.search) {\n      const params = queryString.parse(this.props.location.search)\n      if (params && params.dcatId && typeof params.dcatId === \"string\") {\n        this.props.setUploadedPipelineFromDcat(params.dcatId)\n      }\n    } else {\n      // redirect to create page to upload\n      this.props.history.push('/pipeline/create');\n    }\n    this.props.getAdapters();\n  }\n\n  componentDidUpdate(prevProps: PipelineEditorProps) {\n    if (\n      // Integration with dcat\n      prevProps.uploadedPipelineData !== this.props.uploadedPipelineData\n      && this.props.uploadedPipelineData !== null\n    ) {\n      const { uploadedPipelineData, setGraphNodes, setGraphEdges } = this.props;\n      setGraphEdges(this.createGraphEdges(uploadedPipelineData.edges));\n      setGraphNodes(this.createGraphNodes(uploadedPipelineData.nodes));\n    }\n  }\n\n  handleFileChange = (info: UploadChangeParam<UploadFile>) => {\n    const fileList = [...info.fileList];\n    const file = fileList.slice(-1)[0];\n    if (file.response && file.response.error) {\n      message.info(`${file.response.error}`);\n    } else if (file.response && file.response.data) {\n      const { data } = file.response;\n      // this.props.setUploadedPipelineData(data);\n      this.props.setGraphCreated(true);\n      this.props.setGraphNodes(this.createGraphNodes(data.nodes));\n      this.props.setGraphEdges(this.createGraphEdges(data.edges));\n    }\n    this.setState({ currentFileList: [file] });\n  }\n\n  handleSubmit = () => {\n    const { pipelineName, pipelineDescription } = this.state;\n    const { graphEdges, graphNodes } = this.props;\n    this.props.createPipeline(\n      pipelineName, pipelineDescription,\n      this.createNodes(graphNodes), this.createEdges(graphEdges)\n    );\n    this.props.setUploadedPipelineData(null);\n    this.props.setGraphCreated(false);\n    setTimeout(() => {this.props.history.push('/pipelines');}, 1000);\n  }\n\n  handleCancel = () => {\n    this.props.setUploadedPipelineData(null);\n    this.props.setGraphNodes([]);\n    this.props.setGraphEdges([]);\n    this.props.setGraphCreated(false);\n    this.props.setSelectedNode(null);\n    this.setState({\n      currentFileList: [],\n      pipelineName: \"\",\n      pipelineDescription: \"\",\n    });\n    this.props.history.push('/pipeline/create');\n  }\n\n  createGraphNodes = (nodes: NodeType[]) => {\n    return nodes.map((n, idx) => {\n      const title = n.adapter.split(\".\")[1];\n      const currAdapter = this.props.adapters.filter(ad => ad.id === title)[0];\n      return ({\n        id: n.id,\n        title: title,\n        // type: \"empty\",\n        x: 100 + 200*idx,\n        y: 100,\n        adapter: {\n          id: title,\n          description: currAdapter.description,\n          inputs: n.inputs,\n          outputs: n.outputs\n        }\n      });\n    })\n  }\n\n  createNodes = (nodes: INode[]) => {\n    return nodes.map(n => ({\n      id: n.id,\n      adapter: `funcs.${n.title}`,\n      inputs: n.adapter.inputs,\n      outputs: n.adapter.outputs,\n      // FIXME: missing comment\n    }))\n  }\n\n  createGraphEdges = (edges: EdgeType[]) => {\n    return edges.map(e => ({\n      ...e,\n      type: \"emptyEdge\",\n    }))\n  }\n\n  createEdges = (edges: IEdge[]) => {\n    return edges.map(e => ({\n      source: e.source,\n      target: e.target,\n      input: e.input,\n      output: e.output,\n    }))\n  }\n\n  render() {\n    const { graphCreated, selectedNode } = this.props;\n    // const selectedAdapter = selectedNode ? selectedNode.adapter : null;\n    if (!graphCreated) {\n      return <MyLayout>\n        <Col span={12} style={{ textAlign: \"center\", height: \"100%\" }}>\n          <Button size=\"large\" type=\"primary\" icon=\"plus\"\n            onClick={() => this.props.setGraphCreated(true)}\n            style={{ marginTop: \"30vh\" }}\n          >Click To Start</Button>\n        </Col>\n        <Col span={12} style={{ height: \"100%\" }}>\n          <Upload.Dragger\n            name=\"files\"\n            action={`${flaskUrl}/pipeline/upload_config`}\n            accept=\".json,.yml\"\n            onChange={this.handleFileChange}\n            multiple={false}\n            fileList={this.state.currentFileList}\n            style={{ height: \"100%\" }}\n          >\n            <p className=\"ant-upload-drag-icon\">\n              <Icon type=\"inbox\" />\n            </p>\n            <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\n            <p className=\"ant-upload-hint\">Support for single upload.</p>\n          </Upload.Dragger>\n        </Col>\n      </MyLayout>\n    } else {\n      return (\n        <MyLayout> \n          <Tabs\n            defaultActiveKey=\"pipeline\"\n            // tabPosition=\"left\"\n            style={{ overflowY: \"auto\", height: \"100%\" }}\n          >\n            <TabPane tab=\"Pipeline\" key=\"pipeline\" style={{ height: \"600px\" }}>\n              <Col span={16} style={{ height: \"90%\" }}>\n                <PipelineGraph\n                  selectedNode={selectedNode}\n                  graphNodes={this.props.graphNodes}\n                  graphEdges={this.props.graphEdges}\n                  setGraphNodes={this.props.setGraphNodes}\n                  setGraphEdges={this.props.setGraphEdges}\n                  setSelectedNode={this.props.setSelectedNode}\n                  setSelectedEdge={this.props.setSelectedEdge}\n                  adapters={this.props.adapters}\n                  graphCreated={this.props.graphCreated}\n                />\n              </Col>\n              <Col span={8}>\n                <Row style={{ margin: \"20px 0px\"}}>\n                  <Button\n                    key=\"discard\" onClick={this.handleCancel}\n                    style={{ margin: \"10px\", float: \"right\" }}\n                  >\n                    Discard\n                  </Button>\n                  <Button\n                    key=\"submit\" type=\"primary\"\n                    onClick={() => this.setState({ willSubmit: true })}\n                    style={{ margin: \"10px\", float: \"right\" }}\n                  >\n                    Submit\n                  </Button>\n                  <Modal\n                    title=\"Submitting current pipeline...\"\n                    visible={this.state.willSubmit}\n                    onOk={() => {\n                      this.handleSubmit();\n                      this.setState({ willSubmit: false })\n                    }}\n                    onCancel={() => this.setState({ willSubmit: false })}\n                  >\n                    <Row style={{ margin: \"20px 10px\"}}>\n                      <Input\n                        value={this.state.pipelineName}\n                        onChange={(event: React.ChangeEvent<HTMLInputElement>) => this.setState({ pipelineName: event.target.value})}\n                        placeholder=\"Enter Pipeline Name: (Optional)\"\n                      />\n                    </Row>\n                    <Row style={{ margin: \"20px 10px\"}}>\n                      <TextArea\n                        rows={16}\n                        value={this.state.pipelineDescription}\n                        onChange={({ target }) => this.setState({ pipelineDescription: target.value})}\n                        placeholder=\"Enter Pipeline Description: (Optional)\"\n                      />\n                    </Row>\n                  </Modal>\n                </Row>\n                <Row style={{ margin: \"20px 0px\"}}>\n                  {this.props.selectedNode === null ? null : <AdapterInputs\n                    selectedNode={selectedNode}\n                    graphNodes={this.props.graphNodes}\n                    graphEdges={this.props.graphEdges}\n                    setGraphNodes={this.props.setGraphNodes}\n                    setGraphEdges={this.props.setGraphEdges}\n                    setSelectedNode={this.props.setSelectedNode}\n                    adapters={this.props.adapters}\n                    graphCreated={this.props.graphCreated}\n                  />}\n                  {this.props.selectedEdge === null ? null : <EdgeDetail\n                    selectedEdge={this.props.selectedEdge}\n                    graphNodes={this.props.graphNodes}\n                    adapters={this.props.adapters}\n                  />}\n                </Row>\n              </Col>\n            </TabPane>\n          </Tabs>\n        </MyLayout>\n      );\n    }\n  }\n}\n\nexport default PipelineEditorComponent;\n","import React from \"react\";\nimport {inject, observer} from \"mobx-react\";\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\nimport {IStore} from \"./store\";\nimport NotFound404 from \"./components/NotFound404\";\nimport Home from \"./components/Home\";\nimport Adapters from \"./components/Adapters\";\n// import LoadingComponent from \"./components/Loading\";\nimport PipelineTimeline from \"./components/PipelineTimeline\";\nimport PipelineDetail from \"./components/PipelineDetail\";\nimport PipelineEditor from \"./components/PipelineEditor\";\nimport \"./App.css\";\n\ninterface Props {}\n\n@inject((stores: IStore) => ({\n  routing: stores.routing,\n  pipelineStore: stores.pipelineStore,\n  adapterStore: stores.adapterStore,\n}))\n@observer\nexport default class App extends React.Component<Props> {\n  render() {\n    return (\n      <BrowserRouter>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/adapters\" component={Adapters} />\n          <Route exact path=\"/pipelines\" component={PipelineTimeline} />\n          <Route path='/pipelines/:pipelineId' component={PipelineDetail}/>\n          <Route exact path=\"/pipeline/create\" component={PipelineEditor} />\n          <Route component={NotFound404} />\n        </Switch>\n      </BrowserRouter>\n    );\n  }\n}\n","import \"antd/dist/antd.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {Provider} from \"mobx-react\";\nimport {Router} from \"react-router\";\nimport {history, stores} from \"./store\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport App from \"./App\";\n\n// FIXME: react context, provider and app type error\nReactDOM.render(\n  <Provider {...stores} >\n    <Router history={history}>\n      <App/>\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}