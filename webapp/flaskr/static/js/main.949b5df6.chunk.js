(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{186:function(e,t,a){e.exports=a.p+"static/media/dt_flow.18cbb62c.jpg"},201:function(e,t,a){e.exports=a(388)},386:function(e,t,a){},388:function(e,t,a){"use strict";a.r(t);a(136);var n,r,i,l,o,c,s,p,u,d,m,h,g,E,b,f,y,N,O,v,S,j,x,A,w,C,k,I,T,P,D,F,z,M,G,U,L,R=a(0),_=a.n(R),K=a(7),Y=a.n(K),B=a(19),H=a(196),V=a(22),W=a(128),J=a(17),X=a(21),Z=a(18),$=(a(107),a(11)),q=a(59),Q=a.n(q),ee=(n=$.action.bound,r=function e(t){Object(X.a)(this,e),this.errorStore=void 0,Object(J.a)(this,"adapters",i,this),Object(J.a)(this,"getAdapters",l,this),this.errorStore=t},i=Object(Z.a)(r.prototype,"adapters",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=Object(Z.a)(r.prototype,"getAdapters",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){Q.a.get("".concat("/api","/adapters")).then((function(t){"data"in t?e.adapters=t.data:console.log("THERE IS SOMETHING WRONG!")}))}}}),r),te=(o=$.action.bound,c=$.action.bound,s=$.action.bound,p=$.action.bound,u=$.action.bound,d=$.action.bound,m=$.action.bound,h=$.action.bound,g=$.action.bound,E=function e(t){Object(X.a)(this,e),this.errorStore=void 0,Object(J.a)(this,"pipelines",b,this),Object(J.a)(this,"currentPipeline",f,this),Object(J.a)(this,"uploadedPipelineData",y,this),Object(J.a)(this,"graphCreated",N,this),Object(J.a)(this,"startFetch",O,this),Object(J.a)(this,"successFetch",v,this),Object(J.a)(this,"failedFetch",S,this),Object(J.a)(this,"getPipelines",j,this),Object(J.a)(this,"getPipeline",x,this),Object(J.a)(this,"setUploadedPipelineData",A,this),Object(J.a)(this,"setUploadedPipelineFromDcat",w,this),Object(J.a)(this,"setGraphCreated",C,this),Object(J.a)(this,"createPipeline",k,this),this.errorStore=t},b=Object(Z.a)(E.prototype,"pipelines",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=Object(Z.a)(E.prototype,"currentPipeline",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=Object(Z.a)(E.prototype,"uploadedPipelineData",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Object(Z.a)(E.prototype,"graphCreated",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=Object(Z.a)(E.prototype,"startFetch",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.errorStore.isLoading=!0,console.log("inside start fetch!")}}}),v=Object(Z.a)(E.prototype,"successFetch",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.errorStore.isLoading=!1,e.errorStore.hasFailed=!1,console.log("inside success fetch!")}}}),S=Object(Z.a)(E.prototype,"failedFetch",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){console.log("inside failed fetch!"),e.errorStore.isLoading=!1,e.errorStore.hasFailed=!0,e.errorStore.errorData=t}}}),j=Object(Z.a)(E.prototype,"getPipelines",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){Promise.resolve().then(e.startFetch).then((function(){return Q.a.get("".concat("/api","/pipelines")).then((function(t){e.pipelines=t.data,e.successFetch()}),(function(t){e.failedFetch(t.response)}))}))}}}),x=Object(Z.a)(E.prototype,"getPipeline",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){Promise.resolve().then(e.startFetch).then((function(){return Q.a.get("".concat("/api","/pipelines/").concat(t)).then((function(t){e.currentPipeline=t.data,e.successFetch()}),(function(t){e.failedFetch(t)}))}))}}}),A=Object(Z.a)(E.prototype,"setUploadedPipelineData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.uploadedPipelineData=t}}}),w=Object(Z.a)(E.prototype,"setUploadedPipelineFromDcat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){Promise.resolve().then(e.startFetch).then((function(){return Q.a.get("".concat("/api","/pipeline/dcat/").concat(t)).then((function(t){e.uploadedPipelineData=t.data.data,e.graphCreated=!0,e.successFetch()}),(function(t){e.failedFetch(t)}))}))}}}),C=Object(Z.a)(E.prototype,"setGraphCreated",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.graphCreated=t}}}),k=Object(Z.a)(E.prototype,"createPipeline",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a,n,r){Promise.resolve().then(e.startFetch).then((function(){return Q.a.post("".concat("/api","/pipeline/create"),{name:t,description:a,nodes:n,edges:r}).then((function(t){e.successFetch()}),(function(t){e.failedFetch(t)}))}))}}}),E),ae=(I=$.action.bound,T=$.action.bound,P=$.action.bound,D=function e(){Object(X.a)(this,e),Object(J.a)(this,"isLoading",F,this),Object(J.a)(this,"hasFailed",z,this),Object(J.a)(this,"errorData",M,this),Object(J.a)(this,"setIsLoading",G,this),Object(J.a)(this,"setHasFailed",U,this),Object(J.a)(this,"setErrorData",L,this)},F=Object(Z.a)(D.prototype,"isLoading",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=Object(Z.a)(D.prototype,"hasFailed",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=Object(Z.a)(D.prototype,"errorData",[$.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),G=Object(Z.a)(D.prototype,"setIsLoading",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoading=t}}}),U=Object(Z.a)(D.prototype,"setHasFailed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hasFailed=t}}}),L=Object(Z.a)(D.prototype,"setErrorData",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.errorData=t}}}),D),ne=new W.RouterStore,re=new ae,ie={routing:ne,pipelineStore:new te(re),adapterStore:new ee(re),errorStore:re},le=Object(W.syncHistoryWithStore)(Object(V.a)(),ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe,ce,se,pe,ue,de,me,he,ge,Ee,be,fe=a(27),ye=a(30),Ne=a(28),Oe=a(31),ve=a(36),Se=a(51),je=function(e){function t(){return Object(X.a)(this,t),Object(ye.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"render",value:function(){return _.a.createElement("div",{style:{textAlign:"center"}},_.a.createElement("h1",null,"404 Resource Not Found"))}}]),t}(_.a.Component),xe=a(389),Ae=a(397),we=a(396),Ce=a(390),ke=a(400),Ie=xe.a.Header,Te=xe.a.Content,Pe=xe.a.Footer,De=Ae.a.Search,Fe=Object(B.b)((function(e){return{isLoading:e.errorStore.isLoading,hasFailed:e.errorStore.hasFailed,errorData:e.errorStore.errorData}}))(oe=Object(B.c)(oe=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ye.a)(this,(e=Object(Ne.a)(t)).call.apply(e,[this].concat(r)))).state={selectedKey:""},a}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.children;return R.createElement(xe.a,{className:"layout",style:{height:"100%"}},R.createElement(Ie,null,R.createElement(we.a,{theme:"dark",mode:"horizontal",openKeys:[this.state.selectedKey?this.state.selectedKey:"home-page"],style:{lineHeight:"64px"},onClick:function(t){var a=t.key;return e.setState({selectedKey:a})}},R.createElement(we.a.Item,{key:"home"},R.createElement(ve.b,{to:"/"},"MINT DT")),R.createElement(we.a.Item,{key:"home-page",onClick:function(){return e.setState({selectedKey:"home-page"})}},R.createElement(ve.b,{to:"/",onClick:function(){return e.setState({selectedKey:"home-page"})}},"Home")),R.createElement(we.a.Item,{key:"adapters"},R.createElement(ve.b,{to:"/adapters"},"Adapters")),R.createElement(we.a.Item,{key:"pipelines"},R.createElement(ve.b,{to:"/pipelines"},"Pipeline")),R.createElement(we.a.Item,{key:"create-pipeline"},R.createElement(ve.b,{to:"/pipeline/create"},"Create Pipeline")),R.createElement(we.a.Item,{style:{float:"right"}},R.createElement(De,{placeholder:"Search MINT DT!",onSearch:function(e){return console.log(e)}})))),R.createElement(Te,{style:{padding:"30px 50px"}},R.createElement("div",{style:{background:"#fff",padding:24,minHeight:400,height:"100%",overflow:"auto"}},this.props.isLoading?R.createElement(Ce.a,{size:"large",style:{textAlign:"center"}},R.createElement(ke.a,{message:"Loading pipeline history",description:"Right now is really slow :/",type:"info"})):null,this.props.hasFailed?R.createElement("pre",null,R.createElement("b",null,R.createElement("u",{style:{color:"red"}},"Oops! Some error has occurred! Refresh the page to try again!")),R.createElement("br",null),R.createElement("br",null),JSON.stringify(this.props.errorData,null,2)):null,this.props.isLoading||this.props.hasFailed?null:t)),R.createElement(Pe,{style:{textAlign:"center",verticalAlign:"bottom"}},"MINT \xa92020 Created by USC ISI"))}}]),t}(R.Component))||oe)||oe,ze=a(186),Me=a.n(ze),Ge=a(393),Ue=a(71),Le=a(38),Re=Ge.a.Title,_e=Ge.a.Paragraph,Ke=Object(B.b)((function(e){return{}}))(ce=Object(B.c)((pe=se=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ye.a)(this,(e=Object(Ne.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"render",value:function(){return _.a.createElement(Fe,null,_.a.createElement(Ge.a,null,_.a.createElement(Re,null,"Welcome to MINT-DT",_.a.createElement("br",null),_.a.createElement("span",{style:{color:"purple",fontSize:"0.9em"}},_.a.createElement("i",null," A framework to construct a transformation pipeline based on a given specification")),_.a.createElement("br",null)),_.a.createElement(Ue.a,null,_.a.createElement(Le.a,{span:16},_.a.createElement(_e,{style:{textAlign:"left",fontSize:"1.0em"}},"The idea is that we use ",_.a.createElement("span",{style:{color:"blue"}},"smaller components")," (we refer to them as ",_.a.createElement("b",null,"adapters"),' or building blocks) which we \u2019concatenate\u2019 to form a transformation flow (a "pipeline"). This modular design allows us to ',_.a.createElement("span",{style:{color:"blue"}},"reuse")," existing modules and ",_.a.createElement("span",{style:{color:"blue"}},"wrap ready-scripts")," to create a ",_.a.createElement("span",{style:{color:"blue"}},"language-and-format-independent module")," and ",_.a.createElement("span",{style:{color:"blue"}},"pipeline"),".",_.a.createElement("br",null),"There are three types of components (adapters):",_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Reader Adapter")),". Used as an entry point in the pipeline. It reads an input file (data) and a description of it (D-REPR language).",_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Transformation Adapter")),". A class which performs a trans- formation done in a form of an API endpoint (remote or local) or an in-code script or library (i.e. using python or R). It does not materialize the data into an output, it just reproduces the data.",_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Writer Adapter")),". Used as an exit point in the pipeline. It writes an output file based on a description file (D-REPR language).",_.a.createElement("br",null),"Each adapter is declared using a semantic description of its attributes (i.e. inputs and outputs). The description enables input data validation and compatibility checking between the concatenated adapters and allows an easier construction of the transformation pipeline based on some simple input from the user.",_.a.createElement("br",null),"The figure on the right depicts the general idea of our architecture that is based on building-blocks and components that can be concatenated. In the figure we show a simplified scheme of a transformation pipeline involving a reader adapter, two transformation adapters (\u2019TA\u2019) and a writer adapter.",_.a.createElement("br",null),_.a.createElement("i",null,"As an example, a ",_.a.createElement("span",{style:{color:"blue"}},"reader adapter")," may be a CSV-file-reader that encodes the file's content to an intermediate representation. A ",_.a.createElement("span",{style:{color:"purple"}},"transformation adapter")," may perform unit conversions on the data. Other components, such as Wrap and GraphStr2Str, are used to join and reformat the same resource without changing the actual content of the data. A ",_.a.createElement("span",{style:{color:"purple"}},"writer adapter")," will materialize the output data to some other format, i.e. a NetCDF4 file."),_.a.createElement("br",null))),_.a.createElement(Le.a,{span:4},_.a.createElement("img",{src:Me.a,alt:""})))))}}]),t}(_.a.Component),se.defaultProps={},ce=pe))||ce)||ce,Ye=a(399),Be=a(24),He=a.n(Be),Ve=Object(B.b)((function(e){return{adapters:e.adapterStore.adapters,getAdapters:e.adapterStore.getAdapters}}))(ue=Object(B.c)((me=de=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ye.a)(this,(e=Object(Ne.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"componentDidMount",value:function(){this.props.getAdapters()}},{key:"render",value:function(){var e=0===this.props.adapters.length;return _.a.createElement(Fe,null,this.props.adapters.map((function(t,a){return _.a.createElement(Ye.a,{title:t.id,bordered:!0,loading:e,style:{margin:"10px 10px"},key:"card-".concat(a),hoverable:!0},_.a.createElement("pre",null,"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Function Name")),": ",t.id,_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Description")),": ",t.description,_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Inputs")),": ",He.a.isEmpty(t.inputs)?_.a.createElement("p",null,"None"):Object.keys(t.inputs).map((function(e,a){return _.a.createElement("p",{key:"input-".concat(a)},e,": Type: ",_.a.createElement("input",{value:t.inputs[e].id,readOnly:!0}),"; Optional: ",_.a.createElement("input",{value:JSON.stringify(t.inputs[e].optional),readOnly:!0}))})),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Outputs")),": ",He.a.isEmpty(t.outputs)?_.a.createElement("p",null,"None"):Object.keys(t.outputs).map((function(e,a){return _.a.createElement("p",{key:"input-".concat(a)},e,": Type: ",_.a.createElement("input",{value:t.outputs[e].id,readOnly:!0}),"; Optional: ",_.a.createElement("input",{value:JSON.stringify(t.outputs[e].optional),readOnly:!0}))}))))})))}}]),t}(_.a.Component),de.defaultProps={},ue=me))||ue)||ue,We=a(395),Je=a(34),Xe=a(391),Ze=Ge.a.Title,$e=Ae.a.Search,qe=Object(B.b)((function(e){return{pipelines:e.pipelineStore.pipelines,getPipelines:e.pipelineStore.getPipelines}}))(he=Object(B.c)(he=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ye.a)(this,(e=Object(Ne.a)(t)).call.apply(e,[this].concat(r)))).state={},a.timestampDropdownMenu=_.a.createElement(we.a,null,_.a.createElement(we.a.Item,null,"Newest"),_.a.createElement(we.a.Item,null,"Oldest")),a.statusColorCode={running:"orange",finished:"green",failed:"red"},a}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"componentDidMount",value:function(){this.props.getPipelines()}},{key:"render",value:function(){var e=this;return _.a.createElement(Fe,null,_.a.createElement(_.a.Fragment,null,_.a.createElement(Ue.a,{type:"flex",align:"middle",style:{margin:"20px 0"}},_.a.createElement(Le.a,{span:12},_.a.createElement($e,{placeholder:"input search text",onSearch:function(e){return console.log(e)},style:{textAlign:"left"}})),_.a.createElement(Le.a,{span:8}),_.a.createElement(Le.a,{span:2},_.a.createElement(We.a,{overlay:this.timestampDropdownMenu},_.a.createElement(Je.a,{type:"link",icon:"down",style:{float:"right",color:"black"}},"Sort"))),_.a.createElement(Le.a,{span:2},_.a.createElement(Xe.a,{content:"Create a new pipeline!"},_.a.createElement(ve.b,{to:"/pipeline/create"},_.a.createElement(Je.a,{type:"primary",shape:"circle",icon:"plus",style:{float:"right",margin:"0 25px"},size:"large"}))))),this.props.pipelines.map((function(t,a){return _.a.createElement(Ue.a,{key:"row-".concat(a),type:"flex",align:"middle"},_.a.createElement(Le.a,{span:2,style:{textAlign:"right"}},_.a.createElement(Ze,{style:{color:"".concat(He.a.get(e.statusColorCode,t.status,"black"))},level:4},t.status)),_.a.createElement(Le.a,{span:1}),_.a.createElement(Le.a,{span:19},_.a.createElement(Ue.a,{style:{margin:"0 0"}},_.a.createElement(Ze,{level:4},_.a.createElement(ve.b,{to:"/pipelines/".concat(t.id),style:{color:"black"}},He.a.isEmpty(t.name)?"Unnamed":t.name))),_.a.createElement(Ue.a,{style:{margin:"0 0"}},_.a.createElement("p",null,""===t.end_timestamp?"Started at ".concat(t.start_timestamp,", still running"):"Started at ".concat(t.start_timestamp,", ended at ").concat(t.end_timestamp)))),_.a.createElement(Le.a,{span:2},_.a.createElement(Je.a,{type:"danger",onClick:function(){return console.log("Doesn't do anything!")},disabled:"running"!==t.status,style:{marginRight:"10px"}},"STOP")))})),0===this.props.pipelines.length?_.a.createElement("p",{style:{textAlign:"center"}},_.a.createElement("b",null,"No pipeline to show :/")):null))}}]),t}(_.a.Component))||he)||he,Qe=a(394),et=Object(B.b)((function(e){return{currentPipeline:e.pipelineStore.currentPipeline,getPipeline:e.pipelineStore.getPipeline}}))(ge=Object(B.c)(ge=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ye.a)(this,(e=Object(Ne.a)(t)).call.apply(e,[this].concat(r)))).state={openConfig:!1,openOutput:!1},a}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"componentDidMount",value:function(){this.props.getPipeline(this.props.match.params.pipelineId)}},{key:"render",value:function(){var e=this,t=this.props.currentPipeline;return null===t?_.a.createElement(Fe,null):_.a.createElement(Fe,null,He.a.isEmpty(this.props.currentPipeline)?_.a.createElement(Ce.a,{size:"large",style:{textAlign:"center"}},_.a.createElement(ke.a,{message:"Loading pipeline details",description:"Right now is really slow :/",type:"info"})):_.a.createElement(Ye.a,{title:t.name,bordered:!0,style:{margin:"5px 5px",height:"100%"}},_.a.createElement("pre",null,"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Pipeline ID")),": ",t.id,_.a.createElement("br",null),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Pipeline Name")),": ",t.name,_.a.createElement("br",null),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Description")),": ",t.description,_.a.createElement("br",null),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Start Timestamp")),": ",t.start_timestamp,_.a.createElement("br",null),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"End Timestamp")),": ",t.end_timestamp,_.a.createElement("br",null),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Status")),": ",t.status,_.a.createElement("br",null),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Config")),": ",_.a.createElement(_.a.Fragment,null,_.a.createElement(Je.a,{type:"primary",size:"small",onClick:function(){return e.setState({openConfig:!0})}},"Click Me To View"),_.a.createElement(Qe.a,{title:"Config",visible:this.state.openConfig,onOk:function(){return e.setState({openConfig:!1})},onCancel:function(){return e.setState({openConfig:!1})}},_.a.createElement("pre",null,JSON.stringify(t.config,null,2)))),_.a.createElement("br",null),_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Output")),": ",t.output?_.a.createElement(_.a.Fragment,null,_.a.createElement(Je.a,{type:"primary",size:"small",onClick:function(){return e.setState({openOutput:!0})}},"Click Me To View"),_.a.createElement(Qe.a,{title:"Output",visible:this.state.openOutput,onOk:function(){return e.setState({openOutput:!1})},onCancel:function(){return e.setState({openOutput:!1})}},_.a.createElement("pre",null,t.output.split("\n").map((function(e,t){return _.a.createElement("p",{key:"output-".concat(t)},e.trim())}))))):"None",_.a.createElement("br",null),_.a.createElement("br",null))))}}]),t}(_.a.Component))||ge)||ge,tt=a(198),at=a(197),nt=a(135),rt=a(398),it=a(392),lt=a(10),ot=a(192),ct=a.n(ot),st=a(193),pt=Ae.a.TextArea,ut=nt.a.TabPane,dt={NodeTypes:{empty:{typeText:"wat",shapeId:"#empty",shape:_.a.createElement("symbol",{viewBox:"0 0 50 50",id:"empty",key:"0"},_.a.createElement("rect",{x:"0",y:"0",height:"50",width:"50"}))}},NodeSubtypes:{},EdgeTypes:{emptyEdge:{shapeId:"#emptyEdge",shape:_.a.createElement("symbol",{viewBox:"0 0 50 50",id:"emptyEdge",key:"0"},_.a.createElement("circle",{cx:"25",cy:"25",r:"8",fill:"currentColor"}," "))}}},mt=Object(B.b)((function(e){return{uploadedPipelineData:e.pipelineStore.uploadedPipelineData,graphCreated:e.pipelineStore.graphCreated,location:e.routing.location,createPipeline:e.pipelineStore.createPipeline,setGraphCreated:e.pipelineStore.setGraphCreated,setUploadedPipelineData:e.pipelineStore.setUploadedPipelineData,setUploadedPipelineFromDcat:e.pipelineStore.setUploadedPipelineFromDcat,adapters:e.adapterStore.adapters,getAdapters:e.adapterStore.getAdapters}}))(Ee=Object(B.c)(Ee=function(e){function t(){var e,a;Object(X.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(ye.a)(this,(e=Object(Ne.a)(t)).call.apply(e,[this].concat(r)))).state={currentFileList:[],pipelineName:"",pipelineDescription:"",selected:null,graphNodes:[],graphEdges:[],currentAction:"",currentAdapter:"",currentToNode:"",fromNodeOutput:"",toNodeInput:"",currentAdapterName:""},a.handleFileChange=function(e){var t=Object(at.a)(e.fileList).slice(-1)[0];if(t.response&&t.response.error)rt.a.info("".concat(t.response.error));else if(t.response&&t.response.data){var n=t.response.data;a.props.setGraphCreated(!0),a.setState({graphEdges:a.createGraphEdges(n.edges),graphNodes:a.createGraphNodes(n.nodes)})}a.setState({currentFileList:[t]})},a.handleSubmit=function(){var e=a.state,t=e.pipelineName,n=e.pipelineDescription,r=e.graphEdges,i=e.graphNodes;a.props.createPipeline(t,n,a.createNodes(i),a.createEdges(r)),a.props.setUploadedPipelineData(null),a.props.setGraphCreated(!1),a.props.history.push("/pipelines")},a.handleCancel=function(){a.props.setUploadedPipelineData(null),a.props.setGraphCreated(!1),a.setState({currentFileList:[],pipelineName:"",pipelineDescription:"",selected:null,graphNodes:[],graphEdges:[],currentAction:"",currentAdapter:"",currentToNode:"",fromNodeOutput:"",toNodeInput:"",currentAdapterName:""}),a.props.history.push("/pipeline/create")},a.createGraphNodes=function(e){return e.map((function(e,t){var n=e.adapter.split(".")[1],r=a.props.adapters.filter((function(e){return e.id===n}))[0];return{id:e.id,title:n,x:100+200*t,y:100,adapter:{id:n,description:r.description,inputs:e.inputs,outputs:e.outputs}}}))},a.createNodes=function(e){return e.map((function(e){return{id:e.id,adapter:"funcs.".concat(e.title),inputs:e.adapter.inputs,outputs:e.adapter.outputs}}))},a.findBoundingBoxGraphNodes=function(){for(var e=a.state.graphNodes,t=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,l=-1,o=0;o<e.length;o++){var c=Number(e[o].x),s=Number(e[o].y);o>l&&(l=o),c>t&&(t=c),c<r&&(r=c),s>n&&(n=s),s<i&&(i=s)}return l<0&&(t=300,n=300,r=300,i=300),{maxX:t,maxY:n,minX:r,minY:i,maxId:l}},a.createGraphEdges=function(e){return e.map((function(e){return Object(tt.a)({},e,{type:"emptyEdge"})}))},a.createEdges=function(e){return e.map((function(e){return{source:e.source,target:e.target,input:e.input,output:e.output}}))},a.onUpdateNode=function(e){a.setState({selected:e.id,graphNodes:a.state.graphNodes.map((function(t){return t.id===e.id?e:t}))})},a.createAdapterMenu=function(){return _.a.createElement(we.a,{onClick:function(e){var t=e.item;a.setState({currentAdapter:t.props.children})}},a.props.adapters.map((function(e,t){return _.a.createElement(we.a.Item,{key:"ad-".concat(t)},e.id)})))},a.createFromNodeOutputMenu=function(){var e=a.state.graphNodes.filter((function(e){return e.id===a.state.selected}))[0].adapter;return _.a.createElement(we.a,{onClick:function(e){var t=e.item;a.setState({fromNodeOutput:t.props.children})}},Object.keys(e.outputs).map((function(e,t){return _.a.createElement(we.a.Item,{key:"output-".concat(t)},e)})))},a.createToNodeMenu=function(){return _.a.createElement(we.a,{onClick:function(e){var t=e.item;a.setState({currentToNode:t.props.children})}},a.state.graphNodes.filter((function(e){return e.id!==a.state.selected})).map((function(e,t){return _.a.createElement(we.a.Item,{key:"".concat(t)},e.id)})))},a.createToNodeInputMenu=function(){var e=a.state.graphNodes.filter((function(e){return e.id===a.state.currentToNode}))[0].adapter;return _.a.createElement(we.a,{onClick:function(e){var t=e.item;a.setState({toNodeInput:t.props.children})}},Object.keys(e.inputs).map((function(e,t){return _.a.createElement(we.a.Item,{key:"input-".concat(t)},e)})))},a.createNodeEdgeMenu=function(){var e=a.state.graphEdges.filter((function(e){return e.source===a.state.selected||e.target===a.state.selected}));return _.a.createElement(we.a,{onClick:function(e){var t=e.key.split("-");a.setState({selected:t[0],fromNodeOutput:t[1],currentToNode:t[2],toNodeInput:t[3]})}},e.map((function(e,t){return _.a.createElement(we.a.Item,{key:"".concat(e.source,"-").concat(e.output,"-").concat(e.target,"-").concat(e.input)},"".concat(e.source,".").concat(e.output," => ").concat(e.target,".").concat(e.input))})))},a.onClear=function(){a.setState({selected:null,currentAction:"",currentAdapter:"",currentToNode:"",toNodeInput:"",fromNodeOutput:"",currentAdapterName:""})},a.isAlphaNumericUnderscore=function(e){for(var t=e.split("_"),a=0;a<t.length;a++)if(null===t[a].match(/^[0-9a-zA-Z]+$/g))return!1;return!0},a}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=ct.a.parse(this.props.location.search);e&&e.dcatId&&"string"===typeof e.dcatId&&this.props.setUploadedPipelineFromDcat(e.dcatId)}else this.props.history.push("/pipeline/create");this.props.getAdapters()}},{key:"componentDidUpdate",value:function(e){e.uploadedPipelineData!==this.props.uploadedPipelineData&&null!==this.props.uploadedPipelineData&&this.setState({graphNodes:this.createGraphNodes(this.props.uploadedPipelineData.nodes),graphEdges:this.createGraphEdges(this.props.uploadedPipelineData.edges)})}},{key:"render",value:function(){var e=this,t=this.props.graphCreated,a=this.state.graphNodes.filter((function(t){return t.id===e.state.selected})),n=He.a.get(a[0],"adapter");return t?_.a.createElement(Fe,null,_.a.createElement(nt.a,{defaultActiveKey:"adapters",style:{overflowY:"auto",height:"100%"}},_.a.createElement(ut,{tab:"Adapters",key:"adapters",style:{height:"600px"}},_.a.createElement(Ue.a,{style:{margin:"20px 0px"}},_.a.createElement(Le.a,{span:16},He.a.isEmpty(this.state.selected)&&He.a.isEmpty(this.state.currentAction)?_.a.createElement("p",null,_.a.createElement("b",null,"* Click on node to edit")," OR ",_.a.createElement(Je.a,{style:{margin:"5px"},onClick:function(){return e.setState({currentAction:"add-a-new-node"})}},"Add A New Node")):null,this.state.selected&&He.a.isEmpty(this.state.currentAction)?_.a.createElement("span",null,_.a.createElement("p",null,"Select an action on ".concat(this.state.selected,": ")),_.a.createElement(Je.a,{style:{margin:"5px"},onClick:function(){return e.setState({currentAction:"add-a-new-node"})}},"Add A New Node"),_.a.createElement(Je.a,{style:{margin:"5px"},onClick:function(){return e.setState({currentAction:"add-a-new-edge"})}},"Add A New Edge"),_.a.createElement(Je.a,{style:{margin:"5px"},onClick:function(){return e.setState({currentAction:"delete-this-node"})}},"Delete This Node"),_.a.createElement(Je.a,{style:{margin:"5px"},onClick:function(){return e.setState({currentAction:"delete-its-edge"})}},"Delete Its Edge"),_.a.createElement(Je.a,{style:{margin:"5px"},onClick:function(){return e.setState({selected:null})},type:"dashed"},"Cancel")):null,"add-a-new-node"===this.state.currentAction?_.a.createElement("span",null,_.a.createElement("p",null,"Add A New Node: "),_.a.createElement(We.a,{overlay:this.createAdapterMenu()},this.state.currentAdapter?_.a.createElement("b",null,"Selected Adapter: ".concat(this.state.currentAdapter)):_.a.createElement(Je.a,null,_.a.createElement("b",null,"Select An Adapter"))),this.state.currentAdapter?_.a.createElement("p",null,'Enter adapter name (Please only use "_" as delimiter):',_.a.createElement("input",{style:{margin:"10px"},value:this.state.currentAdapterName,onChange:function(t){var a=t.target;return e.setState({currentAdapterName:a.value})}})):null,_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},disabled:He.a.isEmpty(this.state.currentAdapter)||!this.isAlphaNumericUnderscore(this.state.currentAdapterName),onClick:function(){console.log("adding a new node to the graph");var t=e.findBoundingBoxGraphNodes(),a=t.maxX,n=t.maxY,r=t.minX,i=t.minY,l=t.maxId,o={id:e.state.currentAdapterName?e.state.currentAdapterName:"Node-".concat(l+1),title:"".concat(e.state.currentAdapter),x:300+(a+r)/2,y:(n+i)/2,adapter:e.props.adapters.filter((function(t){return t.id===e.state.currentAdapter}))[0]},c=e.state.graphNodes;c.push(o),e.setState({graphNodes:c,selected:null,currentAction:"",currentAdapter:"",currentAdapterName:""})},type:"primary"},"OK"),_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},onClick:this.onClear},"Clear")):null,"add-a-new-edge"===this.state.currentAction?_.a.createElement("span",null,_.a.createElement("p",null,"Add A New Edge From ".concat(this.state.selected," "),_.a.createElement(We.a,{overlay:this.createFromNodeOutputMenu()},this.state.fromNodeOutput?_.a.createElement("b",null,"".concat(this.state.fromNodeOutput)):_.a.createElement(Je.a,null,_.a.createElement("b",null,"Select Node Output")))," To ",_.a.createElement(We.a,{overlay:this.createToNodeMenu()},this.state.currentToNode?_.a.createElement("b",null," ".concat(this.state.currentToNode)):_.a.createElement(Je.a,null,_.a.createElement("b",null,"Select Node Output"))),"   ",He.a.isEmpty(this.state.currentToNode)?null:_.a.createElement(We.a,{overlay:this.createToNodeInputMenu()},this.state.toNodeInput?_.a.createElement("b",null,"".concat(this.state.toNodeInput)):_.a.createElement(Je.a,null,_.a.createElement("b",null,"Select Node Input"))),_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},disabled:He.a.isEmpty(this.state.toNodeInput),onClick:function(){console.log("adding a new edge to the graph");var t=e.state.graphEdges;t.push({target:e.state.currentToNode,source:e.state.selected||"",type:"empty",input:e.state.toNodeInput,output:e.state.fromNodeOutput}),e.setState({graphEdges:t,selected:null,currentAction:"",currentAdapter:"",currentToNode:"",toNodeInput:"",fromNodeOutput:""})},type:"primary"},"OK"),_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},onClick:this.onClear},"Clear"))):null,"delete-this-node"===this.state.currentAction?_.a.createElement("span",null,_.a.createElement("p",null,"Are you sure you want to delete this node? All inputs/edges of this node will be lost."),_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},type:"danger",onClick:function(){console.log("deleting this node in the graph");var t=e.state.selected,a=e.state.graphNodes.filter((function(e){return e.id!==t})),n=e.state.graphEdges.filter((function(e){return e.target!==t&&e.source!==t}));e.setState({graphEdges:n,graphNodes:a,selected:null,currentAction:"",currentAdapter:""})}},"Yes"),_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},onClick:this.onClear,type:"primary"},"No")):null,"delete-its-edge"===this.state.currentAction?_.a.createElement("span",null,_.a.createElement("p",null,"Select An Edge From ".concat(this.state.selected,":")," "),_.a.createElement(We.a,{overlay:this.createNodeEdgeMenu()},this.state.currentToNode?_.a.createElement("b",null,"Deleting The Edge From ".concat(this.state.selected,".").concat(this.state.fromNodeOutput,"\n                           To ").concat(this.state.currentToNode,".").concat(this.state.toNodeInput)):_.a.createElement(Je.a,null,_.a.createElement("b",null,"Select Node Edges"))),_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},type:"danger",onClick:function(){console.log("deleting this node in the graph");var t=e.state,a=t.selected,n=t.currentToNode,r=t.fromNodeOutput,i=t.toNodeInput,l=e.state.graphEdges.filter((function(e){return e.target!==n||e.source!==a||e.input!==i||e.output!==r}));e.setState({graphEdges:l,selected:null,currentAction:"",currentAdapter:"",currentToNode:""})},disabled:""===this.state.currentToNode},"Yes"),_.a.createElement(Je.a,{style:{float:"right",margin:"5px"},onClick:this.onClear,type:"primary"},"No")):null),_.a.createElement(Le.a,{span:8},_.a.createElement(Je.a,{key:"discard",onClick:this.handleCancel,style:{margin:"10px",float:"right"}},"Discard"),_.a.createElement(Je.a,{key:"submit",type:"primary",onClick:this.handleSubmit,style:{margin:"10px",float:"right"}},"Submit"))),_.a.createElement(Ue.a,null,_.a.createElement(Le.a,{span:He.a.isEmpty(n)?24:16,style:{height:"50vh"}},_.a.createElement(st.GraphView,{ref:"GraphView",nodeKey:"id",nodes:this.state.graphNodes,edges:this.state.graphEdges,selected:{},nodeTypes:dt.NodeTypes,nodeSubtypes:dt.NodeSubtypes,edgeTypes:dt.EdgeTypes,onUpdateNode:this.onUpdateNode,onSelectNode:function(){return console.log("does nothing")},onCreateNode:function(){return console.log("does nothing")},onDeleteNode:function(){return console.log("does nothing")},onSelectEdge:function(){return console.log("does nothing")},onCreateEdge:function(){return console.log("does nothing")},onSwapEdge:function(){return console.log("does nothing")},onDeleteEdge:function(){return console.log("does nothing")},renderNodeText:function(e,t,a){var n=e.title;if("string"===typeof t){var r=t.split("-")[1];return _.a.createElement("text",{textAnchor:"middle",x:0,y:0,fontSize:"smaller"},!!n&&_.a.createElement("tspan",{x:0,dy:-18,opacity:"1"},n),!!r&&_.a.createElement("tspan",{x:0,dy:36,opacity:"1"},r))}},renderNode:function(e){e.selected;return _.a.createElement("g",{className:"shape",height:100,width:100},_.a.createElement("rect",{x:-50,y:-50,width:100,height:100,fill:"#D9EE87",fillOpacity:"1"}))},maxZoom:1})),_.a.createElement(Le.a,{span:He.a.isEmpty(n)?1:8},He.a.isEmpty(n)?null:_.a.createElement(_.a.Fragment,null,_.a.createElement("p",{style:{margin:"20px 20px"}},"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Function Name")),": ",n.id,_.a.createElement("br",null),"\u2022 ",_.a.createElement("b",null,_.a.createElement("u",null,"Description")),": ",n.description,_.a.createElement("br",null)),_.a.createElement("p",{style:{margin:"20px 20px"}},_.a.createElement("b",null,"Inputs to adapter: ")),_.a.createElement("form",null,Object.keys(n.inputs).map((function(t,a){if("graph"===n.inputs[t].id){var r=e.state.graphEdges.filter((function(t){return t.target===e.state.selected&&"graph"===t.input}));return _.a.createElement("p",{key:"input-".concat(a),style:{margin:"20px 20px"}},"".concat(t,": "),_.a.createElement("input",{disabled:!0,type:"text",value:He.a.isEmpty(r)?"Only Changeable By Editing Edges":"".concat(r[0].source,".").concat(r[0].output),style:{padding:"5px",border:"2px solid",borderRadius:"5px",width:"100%"}}))}return _.a.createElement("p",{key:"input-".concat(a),style:{margin:"20px 20px"}},"".concat(t,": "),_.a.createElement("input",{name:t,type:"text",required:n.inputs[t].optional,value:n.inputs[t].val||"",onChange:function(t){var a=t.currentTarget,n=e.state.graphNodes;n.filter((function(t){return t.id===e.state.selected}))[0].adapter.inputs[a.name].val=a.value,e.setState({graphNodes:n})},style:{padding:"5px",border:"2px solid",borderRadius:"5px",width:"100%"}}))}))),_.a.createElement("p",{style:{margin:"20px 20px"}},_.a.createElement("b",null,"Wiring of this adapter:")),this.state.graphEdges.filter((function(t){return t.source===e.state.selected||t.target===e.state.selected})).map((function(e,t){return _.a.createElement("p",{style:{margin:"20px 20px"},key:"edge-".concat(t)},"\u2022 ","".concat(e.source),".",e.output," ",_.a.createElement("b",null,"=>")," ","".concat(e.target),".",e.input)})))))),_.a.createElement(ut,{tab:"Metadata",key:"metadata"},_.a.createElement(Ue.a,{style:{margin:"20px 0px"}},_.a.createElement(Le.a,{span:16},_.a.createElement(Ae.a,{value:this.state.pipelineName,onChange:function(t){return e.setState({pipelineName:t.target.value})},placeholder:"Enter Pipeline Name",style:{margin:"10px"}})),_.a.createElement(Le.a,{span:8},_.a.createElement(Je.a,{key:"discard",onClick:this.handleCancel,style:{margin:"10px",float:"right"}},"Discard"),_.a.createElement(Je.a,{key:"submit",type:"primary",onClick:this.handleSubmit,style:{margin:"10px",float:"right"}},"Submit"))),_.a.createElement(Ue.a,{style:{margin:"20px 10px"}},_.a.createElement(pt,{rows:16,value:this.state.pipelineDescription,onChange:function(t){var a=t.target;return e.setState({pipelineDescription:a.value})},placeholder:"Enter Pipeline Description"}))))):_.a.createElement(Fe,null,_.a.createElement(Le.a,{span:12,style:{textAlign:"center",height:"100%"}},_.a.createElement(Je.a,{size:"large",type:"primary",icon:"plus",onClick:function(){return e.props.setGraphCreated(!0)},style:{marginTop:"30vh"}},"Click To Start")),_.a.createElement(Le.a,{span:12,style:{height:"100%"}},_.a.createElement(it.a.Dragger,{name:"files",action:"".concat("/api","/pipeline/upload_config"),accept:".json,.yml",onChange:this.handleFileChange,multiple:!1,fileList:this.state.currentFileList,style:{height:"100%"}},_.a.createElement("p",{className:"ant-upload-drag-icon"},_.a.createElement(lt.a,{type:"inbox"})),_.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),_.a.createElement("p",{className:"ant-upload-hint"},"Support for single upload."))))}}]),t}(_.a.Component))||Ee)||Ee,ht=(a(386),Object(B.b)((function(e){return{routing:e.routing,pipelineStore:e.pipelineStore,adapterStore:e.adapterStore}}))(be=Object(B.c)(be=function(e){function t(){return Object(X.a)(this,t),Object(ye.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Oe.a)(t,e),Object(fe.a)(t,[{key:"render",value:function(){return _.a.createElement(ve.a,null,_.a.createElement(Se.c,null,_.a.createElement(Se.a,{exact:!0,path:"/",component:Ke}),_.a.createElement(Se.a,{exact:!0,path:"/adapters",component:Ve}),_.a.createElement(Se.a,{exact:!0,path:"/pipelines",component:qe}),_.a.createElement(Se.a,{path:"/pipelines/:pipelineId",component:et}),_.a.createElement(Se.a,{exact:!0,path:"/pipeline/create",component:mt}),_.a.createElement(Se.a,{component:je})))}}]),t}(_.a.Component))||be)||be);Y.a.render(_.a.createElement(B.a,ie,_.a.createElement(H.a,{history:le},_.a.createElement(ht,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[201,1,2]]]);
//# sourceMappingURL=main.949b5df6.chunk.js.map